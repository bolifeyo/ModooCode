<p>itguru Top itguru Top</p><p>이번 강좌에서는</p><ul><li><p> 직접 만드는 문자열 클래스(MyString)에 대해 다룹니다.</p></li></ul><p>안녕하세요? 여러분. C++ 강좌도 벌써 10 번째 강좌입니다. 그 동안 잘 따라오고 있으셨나요? 이번 강좌는 그 동안 배운 내용을 종합해서 하나의 작은 프로젝트를 진행해보도록 할 것입니다. 이 강좌를 통해 여태까지 배운 C++ 클래스의 중요한 내용들을 복습하고 점검할 수 있는 기회가 되었으면 합니다.</p><p>이 강좌를 읽기 전에 앞서, 여러분들은 직접 자신만의 문자열 클래스를 만들어보기 바랍니다. 그 문자열 클래스는 아래와 같은 내용들을 지원해야 합니다.</p><pre class="chroma">
1. 문자(char) 로 부터의 생성, C 문자열 (char *) 로 부터의 생성
1. 문자열 길이를 구하는 함수
1. 문자열 뒤에 다른 문자열 붙이기
1. 문자열 내에 포함되어 있는 문자열 구하기
1. 문자열이 같은지 비교
1. 문자열 크기 비교 (사전 순)
</pre><p>만일 위 내용을 다 만드셨다면 아래 내용을 읽으셔도 되고, 그렇지 않다면, 다시 한 번 도전해보시기 바랍니다!</p><p> 문자열 클래스를 만들자</p><p>기존C 언어에서는 문자열을 나타내기 위해 널 종료 문자열(Null-terminating string) 이라는 개념을 도입해서 문자열 끝에 NULL 문자를 붙여 문자열을 나타내는 방식을 사용하였습니다. 하지만 C 언어 문자열을 사용하는데에는 번거로움이 많았는데, 예를 들어서 만들어진 문자열의 크기를 바꾼다던지, 문자열 뒤에 다른 문자열을 붙인다던지 등의 작업들은 상당히 프로그래머 입장에서는 귀찮을 수 밖에 없습니다. 이와 같은 작업들을 문자열 클래스를 따로 만들어서 클래스 차원에서 지원해주면 상당히 편할 텐데 말이지요. 그래서 우리는 직접 문자열 클래스를 만들고자 합니다.</p><p>사실 C++ 에서는 표준 라이브러리로 string 클래스를 지원하고 있습니다. (실제로 <string> 헤더파일을 include 하면 사용할 수 있습니다.) 하지만 이 막강한 string 클래스를 사용하기 이전에 우리는 직접 string 클래스를 만들고자 합니다. 일단 간단히 생각해서 우리가 만들 MyString 클래스에 멤버 변수로 무엇이 필요할지 생각해봅시다. 아마, 대표적으로 아래 두 개의 데이터들이 필요하다고 볼 수 있습니다.</p><pre class="chroma">
1. 문자열 데이터가 저장된 공간을 가리키는 포인터
1. 문자열 데이터의 길이
</pre><p>왜 객체에 문자열 데이터를 직접 보관하는 것이 아니라, 그 저장된 공간을 가리키는 포인터를 보관하냐고 물을 수 있습니다. 이렇게 하는 이유는 나중에 문자열 데이터의 크기가 바뀔 때, 저장된 공간을 가리키는 방식으로 하면 그 메모리를 해제한 뒤에, 다시 할당할 수 있지만 직접 보관하면 그럴 수 없기 때문이죠.</p><p> 또한, 문자열 데이터의 길이를 보관하는 이유는 문자열 길이를 사용할 일이 굉장히 많은데, 그 때 마다 계속 길이를 구하는 것은 상당히 불필요한 일이기 때문입니다. 따라서 길이를 한 번 구해놓고 길이가 바뀔 때 까지 변경하지 않는 방법이 유용할 것입니다. 그럼, 위 내용을 바탕으로 한번 MyString 을 구성해보도록 하겠습니다.</p><pre class="chroma">
<span class="k">class</span><span class="err"> </span><span class="nc">MyString</span>
<span class="p">{</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">string_content</span><span class="p">;</span> <span class="c1">// 문자열 데이터를 가리키는 포인터
</span><span class="c1"></span><span class="kt">int</span> <span class="n">string_length</span><span class="p">;</span> <span class="c1">// 문자열 길이
</span><span class="c1"></span><span class="p">}</span><span class="p">;</span>
</pre><p>일단 위 두 정보는 private 으로 설정하였습니다. 왜냐하면 우리는 다른 프로그래머가 저의 MyString 을 이용하면서 위와 같은 중요한 정보들에 함부로 접근하기를 원치 않거든요. 그 프로그래머가 실수로 string<span class='font-italic'>length 를 조작하는 명령을 썼다가 자칫 잘못하기라도 하면 어떻겠습니까. 그렇기에 우리는 다른 프로그래머가 저의 MyString 을 string</span>length 나 string<span class='font-italic'>content 를 직접 만지작거리지 않고도 그들의 원하는 모든 작업들을 수행할 수 있도록 충분한 '함수' 들을 제공해야 할 것입니다.</p><p>그럼 생성자들은 어떨까요. 일단, 위에 제가 구현하고자 요구했던 내용들을 충족시키기 위해서는 아래와 같은 생성자들을 만들어야 합니다.</p><pre class="chroma">
<span class="c1">// 문자 하나로 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 문자열로 부터 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 복사 생성자
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
</pre><p>위와 같은 생성자들을 만들기 전에, 어떠한 방식으로 문자열을 저장할 것인지에 대해 먼저 생각해보도록 합시다. 과연 그대로 string<span class='font-italic'>content 에 C 형식의 문자열 (널 종료 문자열) 을 보관하는 것이 좋을까요, 아니면 필요없는 정보들을 빼고 (즉 맨 마지막의 널 문자) 실제 '문자' 만 해당하는 부분만을 넣을까요. C 형식의 문자열을 그대로 보관한다면, 문자열의 끝 부분을 쉽게 체크할 수 있다는 장점이 있지만 이 문제는 우리가 string</span>length 라는 변수를 같이 도입함으로써 해결할 수 있게 되었습니다. 따라서, 저희 MyString 클래스에서는 실제 문자에만 해당하는 내용만을 string<span class='font-italic'>content 에 보관하도록 하겠습니다.</p><pre class="chroma">
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">;</span>
<span class="n">string_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>위와 같이 3 개의 생성자들을 정의하였고, string<span class='font-italic'>content 를 동적 할당으로 처리하였기 때문에 반드시 소멸자에서 이를 동적해제하는 것을 처리해줘야만 합니다. 사실 이것이 클래스의 큰 장점이라고도 볼 수 있는데, C 언어에서 구조체같은 것으로 문자열을 구현하였다면 이를 일일히 동적해제하는 것도 처리해줘야 했었기 때문입니다. 말 그대로, 클래스를 사용하는 사람은 안에서 어떻게 돌아가는지 전혀 신경쓰지 않고도 사용할 수 있게 되는 것입니다.</p><p>그럼 이제 매우 쉽게 문자열의 길이를 구하는 함수를 만들 수 있게 되었습니다. 단순히 string<span class='font-italic'>length 만 리턴해 주면 되는 것입니다.참고로 내부 변수의 내용을 바꾸지 않거나, 상수 함수들만 호출하는 함수들은 왠만하면 이 length 함수 처럼 const 함수로 정의해 주는 것이 좋습니다.</p><pre class="chroma">
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="k">const</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">string_length</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>다만 이러한 방식으로 문자열의 길이를 구한다면, 문자열 조작시에 string<span class='font-italic'>length 의 값을 올바른 값으로 설정해야만 합니다. 예를 들어서, 두 문자열을 서로 더해서 새로운 문자열을 만들 때 새로운 문자열의 string</span>length 는 두 문자열의 string<span class='font-italic'>length 의 합이 되겠지요. 마찬가지로 부분 문자열을 추출하거나, 문자 하나를 지우는 등 모든 작업을 할 때 string</span>length 값을 정확하게 조정해야만 합니다.</p><pre class="chroma">
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">print</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>그리고 마지막으로, 우리의 MyString 클래스의 내용을 보기 위해서, 문자열을 출력하는 함수 print 와 println 을 만들었습니다. (단지 마지막에 개행을 하느냐 안하느냐의 차이) 그럼, 우리의 현재 임시로 만들어 놓은 MyString 클래스가 잘 작동하고 있는지 살펴보도록 합시다.</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


<span class="k">class</span><span class="err"> </span><span class="nc">MyString</span>
<span class="p">{</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">string_content</span><span class="p">;</span> <span class="c1">// 문자열 데이터를 가리키는 포인터
</span><span class="c1"></span><span class="kt">int</span> <span class="n">string_length</span><span class="p">;</span> <span class="c1">// 문자열 길이
</span><span class="c1"></span>

<span class="k">public</span><span class="o">:</span>
<span class="c1">// 문자 하나로 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 문자열로 부터 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 복사 생성자
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>


<span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>


<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>


<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">;</span>
<span class="n">string_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="k">const</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">string_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">print</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">MyString</span> <span class="n">str1</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">hello world!</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span> <span class="nf">str2</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span><span class="p">;</span>


<span class="n">str1</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="n">str2</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><p>와 같이 잘 실행됨을 알 수 있습니다.</p><p> assign 함수</p><p>assign 함수는 '지정하다' 라는 뜻을 가진 함수로, 우리가 흔히 생각하는 '=' 과 동일한 역할을 하게 됩니다. 예를 들어서 우리의 MyString 변수 str 에서</p><pre class="chroma">
<span class="n">str</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">abc</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
</pre><p>를 하게 된다면 str 에는 원래 있었던 문자열이 지워지고 abc 가 들어가게 되겠지요. 그렇다면 우리는 다음과 같은 두 개의 assign 함수를 준비할 수 있습니다.</p><pre class="chroma">
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
</pre><p>물론 이 assign 함수들의 구현 자체는 매우 간단하게 할 수 있습니다. 저의 경우 다음과 같이 구현하였습니다.</p><pre class="chroma">
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">string_length</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 그리고 굳이 str.string_length + 1 ~ string_length 부분은 초기화
</span><span class="c1"></span><span class="c1">// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.
</span><span class="c1"></span>

<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="kt">int</span> <span class="n">str_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">str_length</span> <span class="o">&gt;</span> <span class="n">string_length</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str_length</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>string 의 크기가 작으면 동적 할당을 수행하는데 큰 시간이 필요하지 않겠지만, 우리의 MyString 클래스는 어떤 크기의 문자열에 대해서도 좋은 성능을 보여주어야만 하기 때문에 위 처럼 인자로 입력받는 문자열의 크기가, 원래 문자열의 크기 보다 작다면 굳이 동적 할당을 할 필요가 없게 되죠. 따라서 그 경우에는 그냥 그대로 복사하게 됩니다. 하지만, 인자로 입력받는 문자열의 크기가 더 크다면, 현재까지는 이전에 동적으로 할당된 메모리 바로 뒤에 메모리를 추가하는 방법은 없으므로, 새로 동적할당을 해줘야만 합니다.</p><p>그런데 이렇나 방식으로 구현하는데에는 약간의 문제가 있습니다. 예를 들어 다음과 같은 상황을 생각해봅시다.</p><pre class="chroma">
<span class="n">MyString</span> <span class="nf">str1</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">very very very long string</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">short string</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">very long string</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
</pre><p>맨 처음에 str1 에 아주 긴 문자열을 할당하였습니다. 예를 들어서 그 문자열의 길이가 1000 바이트 라고 생각해봅시다. (물론 위 소스에서는 겨우 몇 바이트 이겠지만 아무튼 아주 긴 문자열이라 생각합시다) 그런 다음에 str1 에 다시 짧은 문자열을 assign 하였다고 가정합니다. 우리의 assign 함수에 따르면 맨 처음에 '아주 긴 문자열' 의 길이가 '짧은 문자열' 보다 훨씬 작을 것이므로 assign 시에 특별히 동적 할당을 할 필요 없이 그냥 string<span class='font-italic'>length 만을 줄인채 짧은 문자열로 덮어 씌우게 됩니다.</p><p>그런데 문제는 다시 str1 에 긴 문자열을 assign 시에 발생하게 됩니다 (이번의 긴 문자열은 이전의 '아주 긴 문자열' 보다는 약간 짧다고 생각합니다). 비록 str1 에 이미 1000 바이트에 달하는 공간이 할당되어 있는데도 불구하고 현재 짧은 문자열이 있기 때문에 새롭게 긴 문자열을 assign 시에 이미 1000 바이트가 할당되어 있다는 사실을 알 수 없게 됩니다. 따라서, assign 함수는 문자열에 짧은 문자열을 위한 작은 크기에 공간만이 할당되어 있다고 생각하여 메모리를 해제하고 다시 많은 양의 메모리를 할당하는 매우 비효율 적인 작업을 하게 됩니다. 이 과정을 그림으로 나타내면 아래와 같습니다.</p><p>따라서 이러한 비효율 적인 막기 위해서는 얼마나 많은 공간이 할당되어 있는지 알 수 있는 정보를 따로 보관하는 것이 좋을 것이라 생각됩니다. 이를 위해 memory<span class='font-italic'>capacity 라는, 현재 할당된 메모리 공간의 크기를 나타내는 새로운 변수를 추가하였습니다.</p><pre class="chroma">
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 그리고 굳이 str.string_length + 1 ~ string_length 부분은 초기화
</span><span class="c1"></span><span class="c1">// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.
</span><span class="c1"></span>

<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="kt">int</span> <span class="n">str_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">str_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str_length</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>이렇게 하게 된다면, 앞선 그림에서 나타나는 상황과 같은 문제를 방지할 수 있게 됩니다. 이렇게 capacity 를 도입함으로써 여러가지 새로운 함수들을 추가할 수 있게 되었습니다. 예를 들어서, 할당할 문자열의 크기를 미리 예약해 놓는 reserve 함수와 현재 문자열의 할당된 메모리 크기를 나타내는 capacity 함수를 만들 수 있습니다. 이들은 다음과 같습니다.</p><pre class="chroma">
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">memory_capacity</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">size</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 만일 예약하려는 size 가 현재 capacity 보다 작다면
</span><span class="c1"></span><span class="c1">// 아무것도 안해도 된다.
</span><span class="c1"></span><span class="p">}</span>
</pre><p>참고로 reserve 함수의 경우, 만일 할당하려는 크기가 현재의 할당된 크기보다 작다면 굳이 할당할 필요가 없게 됩니다. 따라서 위와 같이 size 가 memory<span class='font-italic'>capacity 보다 클 경우에만 할당하도록 처리하였습니다. 과연 잘 작동하는지 살펴볼까요.</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


<span class="k">class</span><span class="err"> </span><span class="nc">MyString</span>
<span class="p">{</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">string_content</span><span class="p">;</span> <span class="c1">// 문자열 데이터를 가리키는 포인터
</span><span class="c1"></span><span class="kt">int</span> <span class="n">string_length</span><span class="p">;</span> <span class="c1">// 문자열 길이
</span><span class="c1"></span>

<span class="kt">int</span> <span class="n">memory_capacity</span><span class="p">;</span> <span class="c1">// 현재 할당된 용량
</span><span class="c1"></span>

<span class="k">public</span><span class="o">:</span>
<span class="c1">// 문자 하나로 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 문자열로 부터 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 복사 생성자
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>


<span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">capacity</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span><span class="p">;</span>


<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>


<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">;</span>
<span class="n">string_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">string_length</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="k">const</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">string_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">print</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 그리고 굳이 str.string_length + 1 ~ string_length 부분은 초기화
</span><span class="c1"></span><span class="c1">// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.
</span><span class="c1"></span>

<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="kt">int</span> <span class="n">str_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">str_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str_length</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span><span class="k">const</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">memory_capacity</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">size</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 만일 예약하려는 size 가 현재 capacity 보다 작다면
</span><span class="c1"></span><span class="c1">// 아무것도 안해도 된다.
</span><span class="c1"></span><span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">MyString</span> <span class="n">str1</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">very very very long string</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="p">;</span>


<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">Capacity : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">String length : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><p>와 같이 잘 나옴을 알 수 있습니다.</p><p>마지막으로 추가할 함수는 임의의 위치의 문자를 리턴하는 함수로, 이전 C 언어에서 [] 로 구현되었던 것입니다. C 문자열의 경우 구조상 배열의 범위를 벗어나는 위치에 대한 문자를 요구하여도 이를 처리할 수 밖에 없었는데 (이는 결국 심각한 오류로 이루어졌죠) C++ 의 경우 특정 위치의 문자를 얻는 것을 함수로 만들어서 올바르지 않는 위치에 대한 문제를 처리할 수 잇게 되었습니다.</p><pre class="chroma">
<span class="kt">char</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">string_length</span> <span class="o">|</span><span class="o">|</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">else</span> <span class="k">return</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>위와 같이 i 가 허용되는 범위를 초과한다면 NULL 을 리턴하도록 하였습니다.</p><p>자 이것으로 해서, 우리가 직접 제작한 문자열 클래스 MyString 의 기본적인 함수들은 모두 제작하였다고 볼 수 있습니다.</p><pre class="chroma">
* 문자 c 혹은 C 형식 문자열 str 에서 생성할 수 있는 생성자와 복사 생성자
* 문자열의 길이를 리턴하는 함수(length)
* 문자열 대입 함수(assign)
* 문자열 메모리 할당 함수(reserve) 및 현재 할당된 크기를 알아오는 함수(capacity)
* 특정 위치의 문자를 리턴하는 함수(at)
</pre><p>이제 MyString 을 사용하는 다른 프로그래머들은 이 최소한의 인터페이스를 이용해서, 여러가지 문자열에 관련한 모든 작업을 수행할 수 있게 됩니다. 하지만 실제로 여러분이 MyString 함수를 널리 편하게 사용하고 싶다면, 더 많은 기능을 제공할 수 있어야 하겠습니다.</p><p> 문자열 삽입하기 (insert)</p><p>문자열 처리에서 가장 빈번하게 사용되는 작업으로, 문자열 중간에 다른 문자열을 삽입하는 작업을 들 수 있습니다. 사실 여태까지 만들언 놓은 함수들만을 가지고도 insert 작업을 쉽게 구현할 수 있겠지만, 빈번하게 사용되는 작업이다 보니까 미리 만들어 놓아서 인터페이스로 제공하는 것도 나쁘지 않을 것이라 생각됩니다.</p><pre class="chroma">
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
</pre><p>일단 저의 경우 insert 작업이 워낙 다양한 용도로 빈번하게 사용되기 때문에 위와 같은 3 개의 insert 함수를 준비하였습니다. 참고로 loc 을 어떻게 생각할 지 미리 기준을 정해야 하는데, 일반적으로 insert 함수에서 입력 위치를 받는 경우, 그 입력 위치 '앞' 에 문자를 insert 하는 경우가 많습니다. 예를 들어서 abc 라는 문자열에 insert(1, "d") 를 하게 된다면, 1 의 위치에 있는 b 앞에 (참고로 모든 위치는 배열의 인덱스로 생각합니다. 즉 a 는 0 의 위치) d 가 삽입됩니다.</p><p>저는 맨 위의 MyString 을 인자로 받는 함수 하나만 제작할 것입니다. 왜냐하면 이 함수만 제대로 제작한다면 나머지 아래의 두 함수는</p><pre class="chroma">
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>와 같이 간단하게 처리할 수 있기 때문이지요. 따라서 우리가 제대로 만들어야 할 함수는 맨 위의 MyString 을 인자로 받는 함수 입니다.</p><pre class="chroma">
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">// 이는 i 의 위치 바로 앞에 문자를 삽입하게 된다. 예를 들어서
</span><span class="c1"></span><span class="c1">// abc 라는 문자열에 insert(1, &#34;d&#34;) 를 하게 된다면 adbc 가 된다.
</span><span class="c1"></span>

<span class="c1">// 범위를 벗어나는 입력에 대해서는 삽입을 수행하지 않는다.
</span><span class="c1"></span><span class="k">if</span><span class="p">(</span><span class="n">loc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">|</span><span class="o">|</span> <span class="n">loc</span> <span class="o">&gt;</span> <span class="n">string_length</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>


<span class="k">if</span><span class="p">(</span><span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 이제 새롭게 동적으로 할당을 해야 한다.
</span><span class="c1"></span><span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>


<span class="kt">char</span> <span class="o">*</span><span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">memory_capacity</span><span class="p">]</span><span class="p">;</span>


<span class="c1">// 일단 insert 되는 부분 직전까지의 내용을 복사한다.
</span><span class="c1"></span><span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 그리고 새롭에 insert 되는 문자열을 넣는다.
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">j</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 이제 다시 원 문자열의 나머지 뒷부분을 복사한다.
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 만일 초과하지 않는 경우 굳이 동적할당을 할 필요가 없게 된다.
</span><span class="c1"></span><span class="c1">// 효율적으로 insert 하기 위해, 밀리는 부분을 먼저 뒤로 밀어버린다.
</span><span class="c1"></span>

<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span> <span class="o">-</span><span class="o">-</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 뒤로 밀기. 이 때 원래의 문자열 데이터가 사라지지 않게 함
</span><span class="c1"></span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// 그리고 insert 되는 문자 다시 집어넣기
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">loc</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>제가 만든 insert 함수는, 이전의 assign 함수 처럼 새로 메모리를 할당해야 할 경우와, 굳이 할당할 필요가 없는 경우를 나누어서 처리하도록 하였습니다. 만일 원 문자열의 길이 + 새로 삽입되는 문자열의 길이가, 현재의 할당된 메모리의 크기 보다 크다면 반드시 메모리를 새로 할당해야 하겠지만, 작은 경우에는, 굳이 메모리를 해제하고 재할당하는데 시간을 낭비할 필요가 없게 됩니다.</p><p>메모리를 다시 할당해야 하는 경우, 일단 string<span class='font-italic'>content 에 새로운 할당된 메모리 주소가 들어가므로, 이전의 메모리 주소를 보관하기 위해 prev</span>string<span class='font-italic'>content 함수를 이용하였습니다. 따라서 이를 이용해서, string</span>content 에 삽입된 문자열을 손쉽게 집어 넣을 수 있었습니다.</p><p>반면에, 메모리를 다시 할당할 필요가 없는 경우 원래의 문자열 내용을 이용하며 삽입된 문자열을 string<span class='font-italic'>content 에 넣어야 하므로 약간의 트릭을 이용하였습니다. 바로, 자리가 바뀌는 문자열들을 먼저 뒤로 밀어버리는 것입니다. 이미 메모리의 할당된 공간은 충분하기 때문에 뒤로 미는 것을 쉽게 수행할 수 있습니다.</p><pre class="chroma">
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span> <span class="o">-</span><span class="o">-</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 뒤로 밀기. 이 때 원래의 문자열 데이터가 사라지지 않게 함
</span><span class="c1"></span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
</pre><p>예를 들어서 앞서 abc 에서 d 를 삽입하는 예에서, 1 의 위치에 d 를 넣었으므로, 자리가 바뀌는 것들은 bc 가 됩니다. 따라서 먼저 bc 를 뒤로 밀어버린 다음, 생긴 공간에 d 를 집어 넣으면 되는 것입니다. 즉, 위 작업을 수행하면 abc 는 abbc 가 되고,</p><pre class="chroma">
<span class="c1">// 그리고 insert 되는 문자 다시 집어넣기
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">loc</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
</pre><p>를 수행하면, insert 되는 문자가 밀린 문자열 공간에 들어가면서 abbc 에서 adbc 가 됩니다. 실제로 실행해보면 아래와 같이 잘 작동함을 알 수 있습니다.</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


<span class="k">class</span><span class="err"> </span><span class="nc">MyString</span>
<span class="p">{</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">string_content</span><span class="p">;</span> <span class="c1">// 문자열 데이터를 가리키는 포인터
</span><span class="c1"></span><span class="kt">int</span> <span class="n">string_length</span><span class="p">;</span> <span class="c1">// 문자열 길이
</span><span class="c1"></span>

<span class="kt">int</span> <span class="n">memory_capacity</span><span class="p">;</span> <span class="c1">// 현재 할당된 용량
</span><span class="c1"></span>

<span class="k">public</span><span class="o">:</span>
<span class="c1">// 문자 하나로 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 문자열로 부터 생성
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="c1">// 복사 생성자
</span><span class="c1"></span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>


<span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">capacity</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span><span class="p">;</span>


<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>


<span class="kt">char</span> <span class="nf">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span><span class="p">;</span>


<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>


<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">;</span>
<span class="n">string_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">string_length</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">length</span><span class="p">(</span><span class="p">)</span><span class="k">const</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">string_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">print</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 그리고 굳이 str.string_length + 1 ~ string_length 부분은 초기화
</span><span class="c1"></span><span class="c1">// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.
</span><span class="c1"></span>

<span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="kt">int</span> <span class="n">str_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">str_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str_length</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>


<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span><span class="k">const</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">memory_capacity</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>


<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">size</span><span class="p">]</span><span class="p">;</span>
<span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>


<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 만일 예약하려는 size 가 현재 capacity 보다 작다면
</span><span class="c1"></span><span class="c1">// 아무것도 안해도 된다.
</span><span class="c1"></span><span class="p">}</span>
<span class="kt">char</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">string_length</span> <span class="o">|</span><span class="o">|</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">else</span> <span class="k">return</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">// 이는 i 의 위치 바로 앞에 문자를 삽입하게 된다. 예를 들어서
</span><span class="c1"></span><span class="c1">// abc 라는 문자열에 insert(1, &#34;d&#34;) 를 하게 된다면 adbc 가 된다.
</span><span class="c1"></span>

<span class="c1">// 범위를 벗어나는 입력에 대해서는 삽입을 수행하지 않는다.
</span><span class="c1"></span><span class="k">if</span><span class="p">(</span><span class="n">loc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">|</span><span class="o">|</span> <span class="n">loc</span> <span class="o">&gt;</span> <span class="n">string_length</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>


<span class="k">if</span><span class="p">(</span><span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 이제 새롭게 동적으로 할당을 해야 한다.
</span><span class="c1"></span><span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>


<span class="kt">char</span> <span class="o">*</span><span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">memory_capacity</span><span class="p">]</span><span class="p">;</span>


<span class="c1">// 일단 insert 되는 부분 직전까지의 내용을 복사한다.
</span><span class="c1"></span><span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 그리고 새롭에 insert 되는 문자열을 넣는다.
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">j</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 이제 다시 원 문자열의 나머지 뒷부분을 복사한다.
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// 만일 초과하지 않는 경우 굳이 동적할당을 할 필요가 없게 된다.
</span><span class="c1"></span><span class="c1">// 효율적으로 insert 하기 위해, 밀리는 부분을 먼저 뒤로 밀어버린다.
</span><span class="c1"></span>

<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span> <span class="o">-</span><span class="o">-</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// 뒤로 밀기. 이 때 원래의 문자열 데이터가 사라지지 않게 함
</span><span class="c1"></span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// 그리고 insert 되는 문자 다시 집어넣기
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span>
<span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">loc</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>


<span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">MyString</span> <span class="n">str1</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">very long string</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span> <span class="nf">str2</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">&lt;some string inserted between&gt;</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="p">;</span>


<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">Capacity : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">String length : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>


<span class="n">str1</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">str2</span><span class="p">)</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><p>와 같이 잘 나옵니다.훌륭한 MyString 클래스를 만들기 위해서, 한 가지 좀 더 생각해보아야 할 점들이 있습니다. 과연 insert 를 사용하는 경우는 보통 어떤 경우일까요? 많은 경우 insert 는 많은 문자열을 한 꺼번에 집어넣는 것이 아니라, 작은 크기의 문자열들을 자주 집어넣는 경우가 많습니다. 즉, 큰 크기의 문자열을 한 번에 insert 하는 작업 보다는 작은 크기의 문자열들을 여러번 insert 하는 명령을 많이 수행한다는 뜻이지요. 그런데, 만일 이미 capacity 한계에 달한 문자열 클래스에 문자 'a' 를 계속 추가하는 명령을 생각해보도록 합시다.</p><pre class="chroma"><span class="k">while</span> <span class="p">(</span><span class="n">some_condition</span><span class="p">)</span><span class="p">{</span><span class="n">str</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">some_location</span><span class="p">,</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">a</span><span class="sc">&#39;</span><span class="p">)</span><span class="p">;</span><span class="p">}</span>
<span class="err">마</span><span class="err">치</span> <span class="err">위</span><span class="err">와</span> <span class="err">같</span><span class="err">은</span> <span class="err">명</span><span class="err">령</span> <span class="err">말</span><span class="err">이</span><span class="err">지</span><span class="err">요</span><span class="p">.</span> <span class="err">이</span><span class="err">미</span> <span class="n">str</span> <span class="err">가</span> <span class="n">capacity</span> <span class="err">한</span><span class="err">계</span><span class="err">에</span> <span class="err">도</span><span class="err">달</span><span class="err">했</span><span class="err">다</span><span class="err">고</span> <span class="err">가</span><span class="err">정</span><span class="err">했</span><span class="err">으</span><span class="err">므</span><span class="err">로</span><span class="p">,</span> <span class="err">매</span> <span class="n">insert</span> <span class="err">마</span><span class="err">다</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span><span class="err">를</span> <span class="err">해</span><span class="err">제</span><span class="err">하</span><span class="err">고</span><span class="p">,</span> <span class="mi">1</span> <span class="err">만</span><span class="err">큼</span> <span class="err">큰</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span><span class="err">를</span> <span class="err">할</span><span class="err">당</span><span class="err">하</span><span class="err">는</span> <span class="err">작</span><span class="err">업</span><span class="err">을</span> <span class="err">반</span><span class="err">복</span><span class="err">하</span><span class="err">게</span> <span class="err">될</span> <span class="err">것</span><span class="err">입</span><span class="err">니</span><span class="err">다</span><span class="p">.</span> <span class="err">이</span><span class="err">는</span> <span class="n">str</span> <span class="err">의</span> <span class="err">크</span><span class="err">기</span><span class="err">가</span> <span class="err">크</span><span class="err">다</span><span class="err">면</span> <span class="err">엄</span><span class="err">청</span><span class="err">난</span> <span class="err">작</span><span class="err">업</span><span class="err">의</span> <span class="err">낭</span><span class="err">비</span><span class="err">가</span> <span class="err">아</span><span class="err">닐</span> <span class="err">수</span> <span class="err">없</span><span class="err">습</span><span class="err">니</span><span class="err">다</span><span class="p">.</span> <span class="err">즉</span><span class="p">,</span> <span class="err">짜</span><span class="err">잘</span><span class="err">하</span><span class="err">게</span> <span class="err">계</span><span class="err">속</span> <span class="n">insert</span> <span class="err">하</span><span class="err">는</span> <span class="err">명</span><span class="err">령</span><span class="err">에</span><span class="err">서</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span> <span class="err">할</span><span class="err">당</span><span class="err">과</span> <span class="err">해</span><span class="err">제</span><span class="err">를</span> <span class="err">반</span><span class="err">복</span><span class="err">하</span><span class="err">지</span> <span class="err">않</span><span class="err">도</span><span class="err">록</span> <span class="err">하</span><span class="err">기</span> <span class="err">위</span><span class="err">해</span><span class="err">서</span><span class="err">라</span><span class="err">면</span><span class="p">,</span> <span class="err">통</span> <span class="err">크</span><span class="err">게</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span><span class="err">를</span> <span class="err">미</span><span class="err">리</span> <span class="n">reserve</span> <span class="err">해</span><span class="err">놓</span><span class="err">는</span> <span class="err">것</span><span class="err">이</span> <span class="err">필</span><span class="err">요</span><span class="err">합</span><span class="err">니</span><span class="err">다</span><span class="p">.</span> <span class="err">물</span><span class="err">론</span><span class="p">,</span> <span class="err">무</span><span class="err">턱</span><span class="err">대</span><span class="err">고</span> <span class="err">미</span><span class="err">리</span> <span class="err">엄</span><span class="err">청</span><span class="err">난</span> <span class="err">크</span><span class="err">기</span><span class="err">의</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span><span class="err">를</span> <span class="err">할</span><span class="err">당</span><span class="err">해</span> <span class="err">놓</span><span class="err">을</span> <span class="err">수</span> <span class="err">도</span> <span class="err">없</span><span class="err">는</span> <span class="err">일</span><span class="err">이</span><span class="err">지</span><span class="err">요</span><span class="p">.</span> <span class="err">만</span><span class="err">일</span> <span class="mi">10</span> <span class="err">바</span><span class="err">이</span><span class="err">트</span> <span class="err">밖</span><span class="err">에</span> <span class="err">사</span><span class="err">용</span><span class="err">하</span><span class="err">지</span> <span class="err">않</span><span class="err">는</span><span class="err">데</span><span class="p">,</span> <span class="err">이</span><span class="err">와</span> <span class="err">같</span><span class="err">이</span> <span class="err">짜</span><span class="err">잘</span><span class="err">하</span><span class="err">게</span> <span class="n">insert</span> <span class="err">하</span><span class="err">는</span> <span class="err">문</span><span class="err">제</span><span class="err">를</span> <span class="err">피</span><span class="err">하</span><span class="err">기</span> <span class="err">위</span><span class="err">해</span> <span class="mi">1000</span> <span class="err">바</span><span class="err">이</span><span class="err">트</span><span class="err">를</span> <span class="err">미</span><span class="err">리</span> <span class="err">할</span><span class="err">당</span><span class="err">해</span> <span class="err">놓</span><span class="err">는</span><span class="err">다</span><span class="err">면</span> <span class="err">소</span><span class="err">중</span><span class="err">한</span> <span class="err">자</span><span class="err">원</span><span class="err">의</span> <span class="err">낭</span><span class="err">비</span><span class="err">가</span> <span class="err">될</span> <span class="err">것</span><span class="err">입</span><span class="err">니</span><span class="err">다</span><span class="p">.</span>
<span class="err">따</span><span class="err">라</span><span class="err">서</span> <span class="err">&#39;</span><span class="n">insert</span> <span class="err">작</span><span class="err">업</span><span class="err">에</span><span class="err">서</span><span class="err">의</span> <span class="err">잦</span><span class="err">은</span> <span class="err">할</span><span class="err">당</span><span class="o">/</span><span class="err">해</span><span class="err">제</span><span class="err">를</span> <span class="err">피</span><span class="err">하</span><span class="err">기</span> <span class="err">위</span><span class="err">해</span> <span class="err">미</span><span class="err">리</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span><span class="err">를</span> <span class="err">할</span><span class="err">당</span><span class="err">해</span><span class="err">놓</span><span class="err">기</span><span class="err">&#39;</span> <span class="err">와</span> <span class="err">&#39;</span><span class="err">메</span><span class="err">모</span><span class="err">리</span><span class="err">를</span> <span class="err">할</span><span class="err">당</span><span class="err">해</span> <span class="err">놓</span><span class="err">되</span><span class="p">,</span> <span class="err">많</span><span class="err">은</span> <span class="err">자</span><span class="err">원</span><span class="err">을</span> <span class="err">낭</span><span class="err">비</span><span class="err">하</span><span class="err">지</span> <span class="err">않</span><span class="err">는</span><span class="err">다</span><span class="err">&#39;</span> <span class="err">라</span><span class="err">는</span> <span class="err">두</span> <span class="err">조</span><span class="err">건</span><span class="err">을</span> <span class="err">모</span><span class="err">두</span> <span class="err">만</span><span class="err">족</span><span class="err">하</span><span class="err">는</span> <span class="err">방</span><span class="err">법</span><span class="err">이</span> <span class="err">있</span><span class="err">을</span><span class="err">까</span><span class="err">요</span><span class="o">?</span> <span class="err">물</span><span class="err">론</span> <span class="err">있</span><span class="err">습</span><span class="err">니</span><span class="err">다</span><span class="p">.</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span><span class="err">를</span> <span class="err">미</span><span class="err">리</span> <span class="err">할</span><span class="err">당</span><span class="err">할</span> <span class="err">경</span><span class="err">우</span><span class="p">,</span> <span class="err">현</span><span class="err">재</span> <span class="err">메</span><span class="err">모</span><span class="err">리</span> <span class="err">크</span><span class="err">기</span><span class="err">의</span> <span class="err">두</span> <span class="err">배</span> <span class="err">정</span><span class="err">도</span><span class="err">를</span> <span class="err">할</span><span class="err">당</span><span class="err">해</span> <span class="err">놓</span><span class="err">는</span> <span class="err">다</span><span class="err">는</span> <span class="err">것</span><span class="err">입</span><span class="err">니</span><span class="err">다</span><span class="p">.</span> <span class="err">이</span><span class="err">를</span> <span class="err">코</span><span class="err">드</span><span class="err">로</span> <span class="err">표</span><span class="err">현</span><span class="err">하</span><span class="err">면</span> <span class="err">아</span><span class="err">래</span><span class="err">와</span> <span class="err">같</span><span class="err">습</span><span class="err">니</span><span class="err">다</span><span class="p">.</span>
</pre><p>cpp</p><p>MyString& MyString::insert(int loc, MyString& str){// 이는 i 의 위치 바로 앞에 문자를 삽입하게 된다. 예를 들어서// abc 라는 문자열에 insert(1, "d") 를 하게 된다면 adbc 가 된다.// 범위를 벗어나는 입력에 대해서는 삽입을 수행하지 않는다.if(loc < 0 || loc > string<span class='font-italic'>length) return </span>this;if(string<span class='font-italic'>length + str.string</span>length > memory<span class='font-italic'>capacity) {// 이제 새롭게 동적으로 할당을 해야 한다.if(memory</span>capacity <span class='font-italic'> 2 > string</span>length + str.string<span class='font-italic'>length)memory</span>capacity <span class='font-italic'>= 2;elsememory</span>capacity = string<span class='font-italic'>length + str.string</span>length;// 생략..즉 새로 할당해야 할 메모리 크기(string<span class='font-italic'>length + str.string</span>length) 가 현재의 memory<span class='font-italic'>capacity 의 두 배 이하라면, 아예 memory</span>capacity 의 두 배에 달하는 크기를 할당해버리는 것입니다. 그리고 물론 insert 되는 문자열의 크기가 엄청 커서 memory<span class='font-italic'>capacity 의 두 배를 뛰어 넘어버린다면 그냥 예약을 생각하지 않고 필요한 만큼 할당해버리면 됩니다. 이와 같은 방식으로 처리한다면, 빈번한 메모리의 할당/해제를 막을 수 있고 또 많은 메모리 공간을 낭비하지 않을수 있습니다.참고로 이러한 방법은 C++ 에서 동적으로 할당되는 메모리를 처리하는데 매우 빈번하게 사용되는 기법중 하나입니다.</p><pre class="chroma"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;using namespace std;</span><span class="cp">
</span><span class="cp"></span><span class="k">class</span><span class="err"> </span><span class="nc">MyString</span><span class="p">{</span><span class="kt">char</span> <span class="o">*</span> <span class="n">string_content</span><span class="p">;</span> <span class="c1">// 문자열 데이터를 가리키는 포인터int string_length; // 문자열 길이
</span><span class="c1"></span><span class="kt">int</span> <span class="n">memory_capacity</span><span class="p">;</span> <span class="c1">// 현재 할당된 용량
</span><span class="c1"></span><span class="k">public</span><span class="o">:</span><span class="c1">// 문자 하나로 생성MyString(char c);
</span><span class="c1"></span><span class="c1">// 문자열로 부터 생성MyString(const char* str);
</span><span class="c1"></span><span class="c1">// 복사 생성자MyString(const MyString &amp;str);
</span><span class="c1"></span><span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">;</span><span class="kt">int</span> <span class="nf">capacity</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">;</span><span class="kt">void</span> <span class="nf">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="kt">char</span> <span class="nf">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span><span class="p">}</span><span class="p">;</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">{</span><span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">;</span><span class="n">string_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span><span class="n">memory_capacity</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="n">string_length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="p">}</span><span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">{</span><span class="n">string_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span><span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">string_length</span><span class="p">;</span><span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span><span class="p">}</span><span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span><span class="p">{</span><span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span><span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span><span class="p">}</span><span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span><span class="p">}</span><span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">length</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">{</span><span class="k">return</span> <span class="n">string_length</span><span class="p">;</span><span class="p">}</span><span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">print</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span><span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span><span class="p">}</span><span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span><span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span><span class="c1">// 그러면 다시 할당을 해줘야만 한다.delete [] string_content;
</span><span class="c1"></span><span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span><span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span><span class="p">}</span>
<span class="c1">// 그리고 굳이 str.string_length + 1 ~ string_length 부분은 초기화// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.
</span><span class="c1"></span><span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="p">}</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">{</span><span class="kt">int</span> <span class="n">str_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="n">str_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span><span class="c1">// 그러면 다시 할당을 해줘야만 한다.delete [] string_content;
</span><span class="c1"></span><span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">str_length</span><span class="p">]</span><span class="p">;</span><span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span><span class="p">}</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>
<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="p">}</span><span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span><span class="k">const</span><span class="p">{</span><span class="k">return</span> <span class="n">memory_capacity</span><span class="p">;</span><span class="p">}</span><span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span><span class="kt">char</span> <span class="o">*</span><span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>
<span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span> <span class="p">[</span><span class="n">size</span><span class="p">]</span><span class="p">;</span><span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span> <span class="o">+</span><span class="o">+</span><span class="p">)</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span><span class="p">}</span>
<span class="c1">// 만일 예약하려는 size 가 현재 capacity 보다 작다면// 아무것도 안해도 된다.}char MyString::at(int i){if(i &gt;= string_length || i &lt; 0) return NULL;else return string_content[i];}MyString&amp; MyString::insert(int loc, MyString&amp; str){// 이는 i 의 위치 바로 앞에 문자를 삽입하게 된다. 예를 들어서// abc 라는 문자열에 insert(1, &#34;d&#34;) 를 하게 된다면 adbc 가 된다.
</span><span class="c1"></span><span class="c1">// 범위를 벗어나는 입력에 대해서는 삽입을 수행하지 않는다.if(loc &lt; 0 || loc &gt; string_length) return *this;
</span><span class="c1"></span><span class="k">if</span><span class="p">(</span><span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span><span class="c1">// 이제 새롭게 동적으로 할당을 해야 한다.
</span><span class="c1"></span><span class="k">if</span><span class="p">(</span><span class="n">memory_capacity</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">)</span><span class="n">memory_capacity</span> <span class="o">*</span><span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="n">elsememory_capacity</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span><span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">memory_capacity</span><span class="p">]</span><span class="p">;</span>
<span class="c1">// 일단 insert 되는 부분 직전까지의 내용을 복사한다.int i;for(i = 0; i &lt; loc; i ++) {string_content[i] = prev_string_content[i];}
</span><span class="c1"></span><span class="c1">// 그리고 새롭에 insert 되는 문자열을 넣는다.for(int j = 0; j != str.string_length; j ++) {string_content[i + j] = str.string_content[j];}
</span><span class="c1"></span><span class="c1">// 이제 다시 원 문자열의 나머지 뒷부분을 복사한다.for(; i &lt; string_length; i ++) {string_content[str.string_length + i] = prev_string_content[i];}
</span><span class="c1"></span><span class="k">delete</span> <span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>
<span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span><span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="p">}</span>
<span class="c1">// 만일 초과하지 않는 경우 굳이 동적할당을 할 필요가 없게 된다.// 효율적으로 insert 하기 위해, 밀리는 부분을 먼저 뒤로 밀어버린다.
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span> <span class="o">-</span><span class="o">-</span><span class="p">)</span> <span class="p">{</span><span class="c1">// 뒤로 밀기. 이 때 원래의 문자열 데이터가 사라지지 않게 함string_content[i + str.string_length] = string_content[i];}// 그리고 insert 되는 문자 다시 집어넣기for(int i = 0; i &lt; str.string_length; i ++)string_content[i + loc] = str.string_content[i];
</span><span class="c1"></span><span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span><span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="p">}</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">{</span><span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span><span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span><span class="p">}</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">{</span><span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="p">;</span><span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span><span class="p">}</span><span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="n">MyString</span> <span class="n">str1</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">very long string</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span><span class="n">MyString</span> <span class="nf">str2</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">&lt;some string inserted between&gt;</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span><span class="n">str1</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">Capacity : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">String length : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="n">str1</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="n">str1</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">str2</span><span class="p">)</span><span class="p">;</span><span class="n">str1</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">Capacity : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">String length : </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span><span class="n">str1</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="err">성</span><span class="err">공</span><span class="err">적</span><span class="err">으</span><span class="err">로</span> <span class="err">컴</span><span class="err">파</span><span class="err">일</span> <span class="err">하</span><span class="err">였</span><span class="err">다</span><span class="err">면</span>




<span class="err">로</span> <span class="err">잘</span> <span class="err">수</span><span class="err">행</span><span class="err">됨</span><span class="err">을</span> <span class="err">알</span> <span class="err">수</span> <span class="err">있</span><span class="err">습</span><span class="err">니</span><span class="err">다</span><span class="p">.</span>



 <span class="n">erase</span> <span class="err">함</span><span class="err">수</span>



<span class="err">앞</span><span class="err">서</span> <span class="n">insert</span> <span class="err">함</span><span class="err">수</span><span class="err">를</span> <span class="err">만</span><span class="err">들</span><span class="err">었</span><span class="err">으</span><span class="err">니</span><span class="p">,</span> <span class="err">이</span><span class="err">번</span><span class="err">에</span><span class="err">는</span> <span class="err">정</span> <span class="err">반</span><span class="err">대</span><span class="err">의</span> <span class="err">역</span><span class="err">할</span><span class="err">을</span> <span class="err">하</span><span class="err">는</span> <span class="n">erase</span> <span class="err">함</span><span class="err">수</span><span class="err">를</span> <span class="err">만</span><span class="err">들</span><span class="err">어</span><span class="err">보</span><span class="err">도</span><span class="err">록</span> <span class="err">합</span><span class="err">시</span><span class="err">다</span><span class="p">.</span> <span class="n">erase</span> <span class="err">함</span><span class="err">수</span><span class="err">는</span> <span class="n">insert</span> <span class="err">함</span><span class="err">수</span><span class="err">보</span><span class="err">다</span> <span class="err">만</span><span class="err">들</span><span class="err">기</span> <span class="err">훨</span><span class="err">씬</span> <span class="err">쉬</span><span class="err">운</span><span class="err">데</span><span class="p">,</span> <span class="err">왜</span><span class="err">냐</span><span class="err">하</span><span class="err">면</span> <span class="err">기</span><span class="err">본</span><span class="err">적</span><span class="err">으</span><span class="err">로</span> <span class="err">데</span><span class="err">이</span><span class="err">터</span><span class="err">의</span> <span class="err">양</span><span class="err">이</span> <span class="err">줄</span><span class="err">어</span> <span class="err">드</span><span class="err">는</span> <span class="err">것</span><span class="err">이</span><span class="err">기</span> <span class="err">때</span><span class="err">문</span><span class="err">에</span> <span class="err">복</span><span class="err">잡</span><span class="err">하</span><span class="err">게</span> <span class="n">capacity</span> <span class="err">이</span><span class="err">런</span> <span class="err">것</span><span class="err">들</span><span class="err">을</span> <span class="err">생</span><span class="err">각</span><span class="err">할</span> <span class="err">필</span><span class="err">요</span><span class="err">가</span> <span class="err">없</span><span class="err">기</span> <span class="err">때</span><span class="err">문</span><span class="err">입</span><span class="err">니</span><span class="err">다</span><span class="p">.</span>

</pre><p>cpp</p><p>MyString& erase(int loc, int num);</p><pre class="chroma">


erase 함수는 위와 같이 생겼고, loc 은 insert 와 동일하게 loc 의 해당하는 문자 &#39;앞&#39; 을 의미합니다. 그리고 num 은 지우는 문자의 수를 의미하죠. 예를 들어서 abcd 라는 문자열에서 erase(1, 2); 를 하게 된다면, 1 에 해당하는 문자 &#39;b&#39; 의 앞에서 부터 2 문자를 지우게 되어, bc 가 지워져서 ad 가 리턴됩니다.

</pre><p>cpp</p><p>MyString& MyString::erase(int loc, int num)</p><p>{// loc 의 앞 부터 시작해서 num 문자를 지운다.if(num < 0 || loc < 0 || loc > string<span class='font-italic'>length) return </span>this;</p><p>// 지운다는 것은 단순히 뒤의 문자들을 앞으로 끌고 온다고// 생각하면 됩니다.</p><p>for(int i = loc + num; i < string<span class='font-italic'>length; i ++) {string</span>content[i - num] = string<span class='font-italic'>content[i];}</p><p>string<span class='font-italic'>length -= num;return </span>this;}</p><pre class="chroma">


위와 같이 간단히 처리할 수 있습니다. string_length 를 도입하여서 정말 편리한 점이 무엇이냐면, 어차피 string_length 뒤에 어떠한 정보가 오든지 간에 별로 신경을 안써도 된다는 점입니다. 위와 같이 앞으로 문자들을 끌고 오면서 뒤의 문자들을 초기화 하지 않았지만, string_length 값을 처리하였기 때문에 뒤의 문자들에 신경 쓰지 않아도 됩니다.


물론 실제로 컴파일 해보면





로 아주 잘 작동함을 알 수 있습니다.





 find 함수



이제 insert 와 erase 이외에 매우 빈번하게 사용되는 또 다른 작업으로 find 함수가 있습니다. 사실 insert, erase, find 는 문자열 연산의 기초 중의 기초라고 불러도 과언이 아닐 만큼 필수적인 함수 입니다. 그렇기 때문에 find 함수 자체를 어떻게 구현하느냐에 따라 문자열 클래스의 전반적인 성능이 좌지우지 되는 경우도 있습니다. 왜냐하면 insert 와 erase 는 사실 연산 시간이 크게 오래 걸리지는 않지만 문자열의 크기가 매우 크다면 find 연산은 엄청나게 오래 걸릴 수 있게 될 수 있지요.


문자열을 검색하는 알고리즘은 수 없이 많지만, 어떤 상황에 대해서도 좋은 성능을 발휘하는 알고리즘은 없습니다. (예를 들어 짧은 문자열 검색에 최적화 된 알고리즘과 긴 문자열 검색에 최적화 된 알고리즘들 같이 말입니다) 그렇기에 특별한 알고리즘을 사용하는 경우에는 그 클래스의 사용 목적이 명확해서 그 알고리즘이 좋은 성능을 발휘할 수 있는 경우에만 사용하는 것이 보통입니다. 따라서 우리의 MyString 의 경우, 가장 간단한 방법으로 find 알고리즘을 구현하기로 하였습니다.

</pre><p>cpp</p><p>int find(int find<span class='font-italic'>from, MyString& str);</p><p>int find(int find<span class='font-italic'>from, const char</span> str);int find(int find<span class='font-italic'>from, char c);</p><pre class="chroma">


일단 우리는 앞서 insert 함수를 구현한 방법처럼, 맨 위의 MyString 을 인자로 받는 find 만 제대로 구현한 후에, 아래 두 개의 find 는 맨 위의 함수를 이용해서 구현하는 방식으로 처리하였습니다.


참고로 find 함수는 find_from 에서 부터 시작해서 가장 첫 번째 str 의 위치를 리턴하게 됩니다. 그리고 str 이 문자열에 포함되어 있지 않다면, -1 을 리턴하게 되지요. 이러한 방법으로, 어떤 문자열 내에 있는 모든 str 들을 찾을 수 있는 for 문을 생각할 수 도 있을 것입니다.

</pre><p>cpp</p><p>int MyString::find(int find<span class='font-italic'>from, MyString& str){int i, j;if(str.string</span>length == 0) return -1;for(i = find<span class='font-italic'>from; i < string</span>length - str.string<span class='font-italic'>length; i ++) {for(j = 0; j < str.string</span>length; j ++) {if(string<span class='font-italic'>content[i + j] != str.string</span>content[j]) break;}</p><p>if(j == str.string<span class='font-italic'>length) return i;}</p><p>return -1; // 찾지 못했음}</p><pre class="chroma">


저의 경우 위와 같이 간단한 방법으로 find 함수를 구현하였습니다. find_from 부터  시작해서 string_content 와 str 가 완벽히 일치하는 부분이 생긴다면 그 위치를 리턴하고, 찾지 못할 경우 -1 을 리턴하도록 말이지요. 그럼 잘 작동하는지 살펴보도록 합시다.

</pre><p>cpp</p><p>#include <iostream>using namespace std;</p><p>class MyString{char <span class='font-italic'> string</span>content; // 문자열 데이터를 가리키는 포인터int string<span class='font-italic'>length; // 문자열 길이</p><p>int memory<span class='font-italic'>capacity; // 현재 할당된 용량</p><p>public:// 문자 하나로 생성MyString(char c);</p><p>// 문자열로 부터 생성MyString(const char<span class='font-italic'> str);</p><p>// 복사 생성자MyString(const MyString &str);</p><p>MyString();</p><p>int length()const;int capacity()const;void reserve(int size);</p><p>void print();void println();</p><p>MyString& assign(MyString& str);MyString& assign(const char <span class='font-italic'>str);</p><p>char at(int i);</p><p>MyString& insert(int loc, MyString& str);MyString& insert(int loc, const char<span class='font-italic'> str);MyString& insert(int loc, char c);</p><p>MyString& erase(int loc, int num);</p><p>int find(int find<span class='font-italic'>from, MyString& str);int find(int find</span>from, const char<span class='font-italic'> str);int find(int find</span>from, char c);};</p><p>MyString::MyString(char c){string<span class='font-italic'>content = new char[1];string</span>content[0] = c;memory<span class='font-italic'>capacity = 1;string</span>length = 1;}MyString::MyString(const char<span class='font-italic'> str){string</span>length = strlen(str);memory<span class='font-italic'>capacity = string</span>length;string<span class='font-italic'>content = new char[string</span>length];</p><p>for(int i = 0; i != string<span class='font-italic'>length; i ++)string</span>content[i] = str[i];}MyString::MyString(const MyString &str){string<span class='font-italic'>length = str.string</span>length;string<span class='font-italic'>content = new char[string</span>length];</p><p>for(int i = 0; i != string<span class='font-italic'>length; i ++)string</span>content[i] = str.string<span class='font-italic'>content[i];}MyString::~MyString(){delete [] string</span>content;}int MyString::length()const{return string<span class='font-italic'>length;}void MyString::print(){for(int i = 0; i != string</span>length; i ++)cout << string<span class='font-italic'>content[i];}void MyString::println(){for(int i = 0; i != string</span>length; i ++)cout << string<span class='font-italic'>content[i];</p><p>cout << endl;}</p><p>MyString& MyString::assign(MyString& str){if(str.string<span class='font-italic'>length > memory</span>capacity) {// 그러면 다시 할당을 해줘야만 한다.delete [] string<span class='font-italic'>content;</p><p>string<span class='font-italic'>content = new char [str.string</span>length];memory<span class='font-italic'>capacity = str.string</span>length;}for(int i = 0; i != str.string<span class='font-italic'>length; i ++) {string</span>content[i] = str.string<span class='font-italic'>content[i];}</p><p>// 그리고 굳이 str.string<span class='font-italic'>length + 1 ~ string</span>length 부분은 초기화// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.</p><p>string<span class='font-italic'>length = str.string</span>length;</p><p>return <span class='font-italic'>this;}MyString& MyString::assign(const char </span>str){int str<span class='font-italic'>length = strlen(str);if(str</span>length > memory<span class='font-italic'>capacity) {// 그러면 다시 할당을 해줘야만 한다.delete [] string</span>content;</p><p>string<span class='font-italic'>content = new char [str</span>length];memory<span class='font-italic'>capacity = str</span>length;}for(int i = 0; i != str<span class='font-italic'>length; i ++) {string</span>content[i] = str[i];}</p><p>string<span class='font-italic'>length = str</span>length;</p><p>return <span class='font-italic'>this;}int MyString::capacity()const{return memory</span>capacity;}void MyString::reserve(int size){if(size > memory<span class='font-italic'>capacity) {char </span>prev<span class='font-italic'>string</span>content = string<span class='font-italic'>content;</p><p>string<span class='font-italic'>content = new char [size];memory</span>capacity = size;</p><p>for(int i = 0; i != string<span class='font-italic'>length; i ++)string</span>content[i] = prev<span class='font-italic'>string</span>content[i];</p><p>delete [] prev<span class='font-italic'>string</span>content;}</p><p>// 만일 예약하려는 size 가 현재 capacity 보다 작다면// 아무것도 안해도 된다.}char MyString::at(int i){if(i >= string<span class='font-italic'>length || i < 0) return NULL;else return string</span>content[i];}MyString& MyString::insert(int loc, MyString& str){// 이는 i 의 위치 바로 앞에 문자를 삽입하게 된다. 예를 들어서// abc 라는 문자열에 insert(1, "d") 를 하게 된다면 adbc 가 된다.</p><p>// 범위를 벗어나는 입력에 대해서는 삽입을 수행하지 않는다.if(loc < 0 || loc > string<span class='font-italic'>length) return </span>this;</p><p>if(string<span class='font-italic'>length + str.string</span>length > memory<span class='font-italic'>capacity) {// 이제 새롭게 동적으로 할당을 해야 한다.</p><p>if(memory<span class='font-italic'>capacity </span> 2 > string<span class='font-italic'>length + str.string</span>length)memory<span class='font-italic'>capacity </span>= 2;elsememory<span class='font-italic'>capacity = string</span>length + str.string<span class='font-italic'>length;</p><p>char <span class='font-italic'>prev</span>string<span class='font-italic'>content = string</span>content;string<span class='font-italic'>content = new char[memory</span>capacity];</p><p>// 일단 insert 되는 부분 직전까지의 내용을 복사한다.int i;for(i = 0; i < loc; i ++) {string<span class='font-italic'>content[i] = prev</span>string<span class='font-italic'>content[i];}</p><p>// 그리고 새롭에 insert 되는 문자열을 넣는다.for(int j = 0; j != str.string<span class='font-italic'>length; j ++) {string</span>content[i + j] = str.string<span class='font-italic'>content[j];}</p><p>// 이제 다시 원 문자열의 나머지 뒷부분을 복사한다.for(; i < string<span class='font-italic'>length; i ++) {string</span>content[str.string<span class='font-italic'>length + i] = prev</span>string<span class='font-italic'>content[i];}</p><p>delete [] prev<span class='font-italic'>string</span>content;</p><p>string<span class='font-italic'>length = string</span>length + str.string<span class='font-italic'>length;return </span>this;}</p><p>// 만일 초과하지 않는 경우 굳이 동적할당을 할 필요가 없게 된다.// 효율적으로 insert 하기 위해, 밀리는 부분을 먼저 뒤로 밀어버린다.</p><p>for(int i = string<span class='font-italic'>length - 1; i >= loc; i --) {// 뒤로 밀기. 이 때 원래의 문자열 데이터가 사라지지 않게 함string</span>content[i + str.string<span class='font-italic'>length] = string</span>content[i];}// 그리고 insert 되는 문자 다시 집어넣기for(int i = 0; i < str.string<span class='font-italic'>length; i ++)string</span>content[i + loc] = str.string<span class='font-italic'>content[i];</p><p>string<span class='font-italic'>length = string</span>length + str.string<span class='font-italic'>length;return </span>this;}MyString& MyString::insert(int loc, const char<span class='font-italic'> str){MyString temp(str);return insert(loc, temp);}MyString& MyString::insert(int loc, char c){MyString temp(c);return insert(loc, temp);}</p><p>MyString& MyString::erase(int loc, int num){// loc 의 앞 부터 시작해서 num 문자를 지운다.if(num < 0 || loc < 0 || loc > string<span class='font-italic'>length) return </span>this;</p><p>// 지운다는 것은 단순히 뒤의 문자들을 앞으로 끌고 온다고// 생각하면 됩니다.</p><p>for(int i = loc + num; i < string<span class='font-italic'>length; i ++) {string</span>content[i - num] = string<span class='font-italic'>content[i];}</p><p>string<span class='font-italic'>length -= num;return </span>this;}int MyString::find(int find<span class='font-italic'>from, MyString& str){int i, j;if(str.string</span>length == 0) return -1;for(i = find<span class='font-italic'>from; i < string</span>length - str.string<span class='font-italic'>length; i ++) {for(j = 0; j < str.string</span>length; j ++) {if(string<span class='font-italic'>content[i + j] != str.string</span>content[j]) break;}</p><p>if(j == str.string<span class='font-italic'>length) return i;}</p><p>return -1; // 찾지 못했음}int MyString::find(int find<span class='font-italic'>from, const char</span> str){MyString temp(str);return find(find<span class='font-italic'>from, temp);}int MyString::find(int find</span>from, char c){MyString temp(c);return find(find<span class='font-italic'>from, temp);}int main(){MyString str1("this is a very very long string");cout << "Location of first <very> in the string : " << str1.find(0, "very") << endl;cout << "Location of second <very> in the string : " << str1.find(str1.find(0, "very") + 1, "very") << endl;}</p><pre class="chroma">


성공적으로 컴파일 하였다면









와 같이 잘 처리되고 있음을 알 수 있습니다. 참고로 첫 번째 str1.find(0, &#34;very&#34;) 에서는, 맨 처음 부터 시작해서 &#34;very&#34; 를 찾습니다. 그 결과 10 의 위치에 있음을 알 수 있었지요. 그 다음 &#34;very&#34; 를 찾기 위해 이전의 검색 한 위치 바로 다음 부터 시작하여 또 &#34;very&#34; 를 찾습니다. 그 결과 15 의 위치에 있는 &#34;very&#34; 를 찾을 수 있게 됩니다.



 크기 비교 함수 compare



마지막으로 만들 함수는 문자열 간의 크기를 비교하는 compare 함수 입니다. 여기서 &#39;크기&#39; 를 비교한다는 의미는 사전식으로 배열해서 어떤 문자열이 더 뒤에 오는지 판단한다는 의미가 됩니다. 이 함수를 이용해서 문자열 전체를 정렬하는 함수라던지, 기존의 C 언어에서 strcmp 함수 등으로 지원하였던 것들을 그대로 사용할 수 있게 됩니다.

</pre><p>cpp</p><p>int compare(MyString& str);</p><pre class="chroma">


일단 함수의 원형은 위와 같이 *this 와 str 을 비교하는 형태로 이루어집니다.

</pre><p>cpp</p><p>int MyString::compare(MyString& str)</p><p>{// (<span class='font-italic'>this) - (str) 을 수행해서 그 1, 0, -1 로 그 결과를 리턴한다// 1 은 (</span>this) 가 사전식으로 더 뒤에 온다는 의미. 0 은 두 문자열// 이 같다는 의미, -1 은 (<span class='font-italic'>this) 사 사전식으러 더 앞에 온다는 의미이다.</p><p>for(int i = 0; i < min(string<span class='font-italic'>length, str.string</span>length); i ++) {if(string<span class='font-italic'>content[i] > str.string</span>content[i]) return 1;else if(string<span class='font-italic'>content[i] < str.string</span>content[i]) return -1;}</p><p>// 여기 까지 했는데 끝나지 않았다면 앞 부분 까지 모두 똑같은 것이 된다.// 만일 문자열 길이가 같다면 두 문자열은 아예 같은 문자열이 된다.</p><p>if(string<span class='font-italic'>length == str.string</span>length) return 0;</p><p>// 참고로 abc 와 abcd 의 크기 비교는 abcd 가 더 뒤에 오게 된다.else if(string<span class='font-italic'>length > str.string</span>length) return 1;</p><p>return -1;}</p><pre class="chroma">


참고로 말하면 abc 와 abcd 의 크기를 비교하면 abc 가 abcd 보다 사전식으로 더 앞에 오게 됩니다. 따라서 이에 대한 처리는 뒷부분에서 따로 하게 됩니다. 그리고 한 가지 더 말하자면 min 과 max 함수는 iostream 를 include 하면 사용할 수 있는 함수들 이므로, 굳이 귀찮게 만드실 필요는 없습니다.

</pre><p>cpp</p><p>#include <iostream></p><p>// min 함수를 사용하기 위한 헤더// 사실 min 정도는 여러분이 간단히 만들어서 써도// 됩니다.#include <algorithm></p><p>using namespace std;</p><p>class MyString{char <span class='font-italic'> string</span>content; // 문자열 데이터를 가리키는 포인터int string<span class='font-italic'>length; // 문자열 길이</p><p>int memory<span class='font-italic'>capacity; // 현재 할당된 용량</p><p>public:// 문자 하나로 생성MyString(char c);</p><p>// 문자열로 부터 생성MyString(const char<span class='font-italic'> str);</p><p>// 복사 생성자MyString(const MyString &str);</p><p>MyString();</p><p>int length()const;int capacity()const;void reserve(int size);</p><p>void print();void println();</p><p>MyString& assign(MyString& str);MyString& assign(const char <span class='font-italic'>str);</p><p>char at(int i);</p><p>MyString& insert(int loc, MyString& str);MyString& insert(int loc, const char<span class='font-italic'> str);MyString& insert(int loc, char c);</p><p>MyString& erase(int loc, int num);</p><p>int find(int find<span class='font-italic'>from, MyString& str);int find(int find</span>from, const char<span class='font-italic'> str);int find(int find</span>from, char c);</p><p>int compare(MyString& str);};</p><p>MyString::MyString(char c){string<span class='font-italic'>content = new char[1];string</span>content[0] = c;memory<span class='font-italic'>capacity = 1;string</span>length = 1;}MyString::MyString(const char<span class='font-italic'> str){string</span>length = strlen(str);memory<span class='font-italic'>capacity = string</span>length;string<span class='font-italic'>content = new char[string</span>length];</p><p>for(int i = 0; i != string<span class='font-italic'>length; i ++)string</span>content[i] = str[i];}MyString::MyString(const MyString &str){string<span class='font-italic'>length = str.string</span>length;string<span class='font-italic'>content = new char[string</span>length];</p><p>for(int i = 0; i != string<span class='font-italic'>length; i ++)string</span>content[i] = str.string<span class='font-italic'>content[i];}MyString::~MyString(){delete [] string</span>content;}int MyString::length()const{return string<span class='font-italic'>length;}void MyString::print(){for(int i = 0; i != string</span>length; i ++)cout << string<span class='font-italic'>content[i];}void MyString::println(){for(int i = 0; i != string</span>length; i ++)cout << string<span class='font-italic'>content[i];</p><p>cout << endl;}</p><p>MyString& MyString::assign(MyString& str){if(str.string<span class='font-italic'>length > memory</span>capacity) {// 그러면 다시 할당을 해줘야만 한다.delete [] string<span class='font-italic'>content;</p><p>string<span class='font-italic'>content = new char [str.string</span>length];memory<span class='font-italic'>capacity = str.string</span>length;}for(int i = 0; i != str.string<span class='font-italic'>length; i ++) {string</span>content[i] = str.string<span class='font-italic'>content[i];}</p><p>// 그리고 굳이 str.string<span class='font-italic'>length + 1 ~ string</span>length 부분은 초기화// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.</p><p>string<span class='font-italic'>length = str.string</span>length;</p><p>return <span class='font-italic'>this;}MyString& MyString::assign(const char </span>str){int str<span class='font-italic'>length = strlen(str);if(str</span>length > memory<span class='font-italic'>capacity) {// 그러면 다시 할당을 해줘야만 한다.delete [] string</span>content;</p><p>string<span class='font-italic'>content = new char [str</span>length];memory<span class='font-italic'>capacity = str</span>length;}for(int i = 0; i != str<span class='font-italic'>length; i ++) {string</span>content[i] = str[i];}</p><p>string<span class='font-italic'>length = str</span>length;</p><p>return <span class='font-italic'>this;}int MyString::capacity()const{return memory</span>capacity;}void MyString::reserve(int size){if(size > memory<span class='font-italic'>capacity) {char </span>prev<span class='font-italic'>string</span>content = string<span class='font-italic'>content;</p><p>string<span class='font-italic'>content = new char [size];memory</span>capacity = size;</p><p>for(int i = 0; i != string<span class='font-italic'>length; i ++)string</span>content[i] = prev<span class='font-italic'>string</span>content[i];</p><p>delete [] prev<span class='font-italic'>string</span>content;}</p><p>// 만일 예약하려는 size 가 현재 capacity 보다 작다면// 아무것도 안해도 된다.}char MyString::at(int i){if(i >= string<span class='font-italic'>length || i < 0) return NULL;else return string</span>content[i];}MyString& MyString::insert(int loc, MyString& str){// 이는 i 의 위치 바로 앞에 문자를 삽입하게 된다. 예를 들어서// abc 라는 문자열에 insert(1, "d") 를 하게 된다면 adbc 가 된다.</p><p>// 범위를 벗어나는 입력에 대해서는 삽입을 수행하지 않는다.if(loc < 0 || loc > string<span class='font-italic'>length) return </span>this;</p><p>if(string<span class='font-italic'>length + str.string</span>length > memory<span class='font-italic'>capacity) {// 이제 새롭게 동적으로 할당을 해야 한다.</p><p>if(memory<span class='font-italic'>capacity </span> 2 > string<span class='font-italic'>length + str.string</span>length)memory<span class='font-italic'>capacity </span>= 2;elsememory<span class='font-italic'>capacity = string</span>length + str.string<span class='font-italic'>length;</p><p>char <span class='font-italic'>prev</span>string<span class='font-italic'>content = string</span>content;string<span class='font-italic'>content = new char[memory</span>capacity];</p><p>// 일단 insert 되는 부분 직전까지의 내용을 복사한다.int i;for(i = 0; i < loc; i ++) {string<span class='font-italic'>content[i] = prev</span>string<span class='font-italic'>content[i];}</p><p>// 그리고 새롭에 insert 되는 문자열을 넣는다.for(int j = 0; j != str.string<span class='font-italic'>length; j ++) {string</span>content[i + j] = str.string<span class='font-italic'>content[j];}</p><p>// 이제 다시 원 문자열의 나머지 뒷부분을 복사한다.for(; i < string<span class='font-italic'>length; i ++) {string</span>content[str.string<span class='font-italic'>length + i] = prev</span>string<span class='font-italic'>content[i];}</p><p>delete [] prev<span class='font-italic'>string</span>content;</p><p>string<span class='font-italic'>length = string</span>length + str.string<span class='font-italic'>length;return </span>this;}</p><p>// 만일 초과하지 않는 경우 굳이 동적할당을 할 필요가 없게 된다.// 효율적으로 insert 하기 위해, 밀리는 부분을 먼저 뒤로 밀어버린다.</p><p>for(int i = string<span class='font-italic'>length - 1; i >= loc; i --) {// 뒤로 밀기. 이 때 원래의 문자열 데이터가 사라지지 않게 함string</span>content[i + str.string<span class='font-italic'>length] = string</span>content[i];}// 그리고 insert 되는 문자 다시 집어넣기for(int i = 0; i < str.string<span class='font-italic'>length; i ++)string</span>content[i + loc] = str.string<span class='font-italic'>content[i];</p><p>string<span class='font-italic'>length = string</span>length + str.string<span class='font-italic'>length;return </span>this;}MyString& MyString::insert(int loc, const char<span class='font-italic'> str){MyString temp(str);return insert(loc, temp);}MyString& MyString::insert(int loc, char c){MyString temp(c);return insert(loc, temp);}</p><p>MyString& MyString::erase(int loc, int num){// loc 의 앞 부터 시작해서 num 문자를 지운다.if(num < 0 || loc < 0 || loc > string<span class='font-italic'>length) return </span>this;</p><p>// 지운다는 것은 단순히 뒤의 문자들을 앞으로 끌고 온다고// 생각하면 됩니다.</p><p>for(int i = loc + num; i < string<span class='font-italic'>length; i ++) {string</span>content[i - num] = string<span class='font-italic'>content[i];}</p><p>string<span class='font-italic'>length -= num;return </span>this;}int MyString::find(int find<span class='font-italic'>from, MyString& str){int i, j;if(str.string</span>length == 0) return -1;for(i = find<span class='font-italic'>from; i < string</span>length - str.string<span class='font-italic'>length; i ++) {for(j = 0; j < str.string</span>length; j ++) {if(string<span class='font-italic'>content[i + j] != str.string</span>content[j]) break;}</p><p>if(j == str.string<span class='font-italic'>length) return i;}</p><p>return -1; // 찾지 못했음}int MyString::find(int find<span class='font-italic'>from, const char</span> str){MyString temp(str);return find(find<span class='font-italic'>from, temp);}int MyString::find(int find</span>from, char c){MyString temp(c);return find(find<span class='font-italic'>from, temp);}int MyString::compare(MyString& str){// (</span>this) - (str) 을 수행해서 그 1, 0, -1 로 그 결과를 리턴한다// 1 은 (<span class='font-italic'>this) 가 사전식으로 더 뒤에 온다는 의미. 0 은 두 문자열// 이 같다는 의미, -1 은 (</span>this) 사 사전식으러 더 앞에 온다는 의미이다.</p><p>for(int i = 0; i < min(string<span class='font-italic'>length, str.string</span>length); i ++) {if(string<span class='font-italic'>content[i] > str.string</span>content[i]) return 1;else if(string<span class='font-italic'>content[i] < str.string</span>content[i]) return -1;}</p><p>// 여기 까지 했는데 끝나지 않았다면 앞 부분 까지 모두 똑같은 것이 된다.// 만일 문자열 길이가 같다면 두 문자열은 아예 같은 문자열이 된다.</p><p>if(string<span class='font-italic'>length == str.string</span>length) return 0;</p><p>// 참고로 abc 와 abcd 의 크기 비교는 abcd 가 더 뒤에 오게 된다.else if(string<span class='font-italic'>length > str.string</span>length) return 1;</p><p>return -1;}int main(){MyString str1("abcdef");MyString str2("abcde");</p><p>cout << "str1 and str2 compare : " << str1.compare(str2) << endl;}</p><pre class="chroma">


성공적으로 컴파일 하였다면







와 같이 잘 나옴을 알 수 있습니다.


이것으로, 여태까지 배운 C++ 에 대한 내용을 종합해서 훌륭한 MyString 클래스를 만들었다고 볼 수 있습니다. 우리의 MyString 클래스는 다음과 같은 인터페이스를 제공합니다.

</pre><p>info</p><ul><li><p> 문자 c 혹은 C 형식 문자열 str 에서 생성할 수 있는 생성자와 복사 생성자</p></li><li><p> 문자열의 길이를 리턴하는 함수(length)</p></li><li><p> 문자열 대입 함수(assign)</p></li><li><p> 문자열 메모리 할당 함수(reserve) 및 현재 할당된 크기를 알아오는 함수(capacity)</p></li><li><p> 특정 위치의 문자를 리턴하는 함수(at)</p></li><li><p> 특정 위치에 특정 문자열을 삽입하는 함수(insert)</p></li><li><p> 특정 위치의 특정 개수의 문자를 지우는 함수(erase)</p></li><li><p> 특정 위치를 시작으로 특정 문자열을 검색하는 함수(find)</p></li><li><p> 두 문자열을 사전식 비교하는 함수(compare)</p></li></ul><pre class="chroma">
이 정도면 괜찮은 문자열 클래스라고 볼 수 있지 않나요 ㅎㅎ. 이번 강좌를 통해서 현재 까지 배운 C++ 클래스에 좀더 친숙해 질 수 있는 좋은 경험이 되었으면 합니다. 자, 그럼 이것으로 이번 강좌를 마치도록 하겠습니다.


 생각해보기



1. 여러가지 검색 알고리즘(KMP, Boyer - Moore) 들을 이용하는 find 함수를 만들어보세요. 어떤 알고리즘의 경우 미리 계산된 테이블이 필요할 텐데, 이러한 정보들 역시 class 변수로 처리하셔도 됩니다. (난이도 : 上)




</pre><p>warning</p><p>강좌를 보다가 조금이라도 궁금한 것이나 이상한 점이 있다면꼭 댓글을 남겨주시기 바랍니다. 그 외에도 강좌에 관련된 것이라면 어떠한 것도 질문해 주셔도 상관 없습니다. 생각해 볼 문제도 정 모르겠다면 댓글을 달아주세요.</p><p>현재 여러분이 보신 강좌는<<씹어먹는 C++ - <4 - 5. 내가 만드는 String 클래스>>> 입니다. 이번 강좌의모든 예제들의 코드를 보지 않고 짤 수준까지 강좌를 읽어 보시기 전까지 다음 강좌로 넘어가지 말아주세요</p><p>다음 강좌 보러가기</p><p>```



공감sns신고저작자표시	<rdf:RDF xmlns="http://web.resource.org/cc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">		<Work rdf:about="">			<license rdf:resource="http://creativecommons.org/licenses/by-fr/2.0/kr/" />		</Work>		<License rdf:about="http://creativecommons.org/licenses/by-fr/">			<permits rdf:resource="http://web.resource.org/cc/Reproduction"/>			<permits rdf:resource="http://web.resource.org/cc/Distribution"/>			<requires rdf:resource="http://web.resource.org/cc/Notice"/>			<requires rdf:resource="http://web.resource.org/cc/Attribution"/>			<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/>		</License>	</rdf:RDF>'C++' 카테고리의 다른 글씹어먹는 C++ - <5 - 2. 입출력, 첨자, 타입변환, 증감 연산자 오버로딩>(5)2013.08.29씹어먹는 C++ - <5 - 1. 내가 만든 연산자 - 연산자 오버로딩>(7)2013.08.25씹어먹는 C++ - <4 - 5. 내가 만드는 String 클래스>(29)2013.08.15씹어먹는 C++ - <4 - 4. 스타크래프트를 만들자 ② (const, static)>(17)2013.05.26씹어먹는 C++ 토막글 ② - 람다(lambda) 함수(12)2013.01.08씹어먹는 C++ - <4 - 3. 스타크래프트를 만들자 ① (복사 생성자, 소멸자)>(41)2013.01.06
</p><style>/* Background */ .chroma { background-color: #ffffff }
/* Error */ .chroma .err { color: #a61717; background-color: #e3d2d2 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%; }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em; }
/* Keyword */ .chroma .k { color: #000000; font-weight: bold }
/* KeywordConstant */ .chroma .kc { color: #000000; font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { color: #000000; font-weight: bold }
/* KeywordNamespace */ .chroma .kn { color: #000000; font-weight: bold }
/* KeywordPseudo */ .chroma .kp { color: #000000; font-weight: bold }
/* KeywordReserved */ .chroma .kr { color: #000000; font-weight: bold }
/* KeywordType */ .chroma .kt { color: #445588; font-weight: bold }
/* NameAttribute */ .chroma .na { color: #008080 }
/* NameBuiltin */ .chroma .nb { color: #0086b3 }
/* NameBuiltinPseudo */ .chroma .bp { color: #999999 }
/* NameClass */ .chroma .nc { color: #445588; font-weight: bold }
/* NameConstant */ .chroma .no { color: #008080 }
/* NameDecorator */ .chroma .nd { color: #3c5d5d; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #800080 }
/* NameException */ .chroma .ne { color: #990000; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #990000; font-weight: bold }
/* NameLabel */ .chroma .nl { color: #990000; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #555555 }
/* NameTag */ .chroma .nt { color: #000080 }
/* NameVariable */ .chroma .nv { color: #008080 }
/* NameVariableClass */ .chroma .vc { color: #008080 }
/* NameVariableGlobal */ .chroma .vg { color: #008080 }
/* NameVariableInstance */ .chroma .vi { color: #008080 }
/* LiteralString */ .chroma .s { color: #dd1144 }
/* LiteralStringAffix */ .chroma .sa { color: #dd1144 }
/* LiteralStringBacktick */ .chroma .sb { color: #dd1144 }
/* LiteralStringChar */ .chroma .sc { color: #dd1144 }
/* LiteralStringDelimiter */ .chroma .dl { color: #dd1144 }
/* LiteralStringDoc */ .chroma .sd { color: #dd1144 }
/* LiteralStringDouble */ .chroma .s2 { color: #dd1144 }
/* LiteralStringEscape */ .chroma .se { color: #dd1144 }
/* LiteralStringHeredoc */ .chroma .sh { color: #dd1144 }
/* LiteralStringInterpol */ .chroma .si { color: #dd1144 }
/* LiteralStringOther */ .chroma .sx { color: #dd1144 }
/* LiteralStringRegex */ .chroma .sr { color: #009926 }
/* LiteralStringSingle */ .chroma .s1 { color: #dd1144 }
/* LiteralStringSymbol */ .chroma .ss { color: #990073 }
/* LiteralNumber */ .chroma .m { color: #009999 }
/* LiteralNumberBin */ .chroma .mb { color: #009999 }
/* LiteralNumberFloat */ .chroma .mf { color: #009999 }
/* LiteralNumberHex */ .chroma .mh { color: #009999 }
/* LiteralNumberInteger */ .chroma .mi { color: #009999 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #009999 }
/* LiteralNumberOct */ .chroma .mo { color: #009999 }
/* Operator */ .chroma .o { color: #000000; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #000000; font-weight: bold }
/* Comment */ .chroma .c { color: #999988; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #999988; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #999988; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #999988; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #999999; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #999999; font-weight: bold; font-style: italic }
/* GenericDeleted */ .chroma .gd { color: #000000; background-color: #ffdddd }
/* GenericEmph */ .chroma .ge { color: #000000; font-style: italic }
/* GenericError */ .chroma .gr { color: #aa0000 }
/* GenericHeading */ .chroma .gh { color: #999999 }
/* GenericInserted */ .chroma .gi { color: #000000; background-color: #ddffdd }
/* GenericOutput */ .chroma .go { color: #888888 }
/* GenericPrompt */ .chroma .gp { color: #555555 }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #aaaaaa }
/* GenericTraceback */ .chroma .gt { color: #aa0000 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #bbbbbb }
</style>
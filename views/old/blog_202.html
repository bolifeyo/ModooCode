<p>이번 강좌에서는<span class='font-italic'> 산술 연산자 오버로딩</p><ul><li><p> 비교 연산자 오버로딩</p></li><li><p> 대입 연산자 오버로딩</p></li></ul><p>에 대해서 다룹니다.</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile28.uf.tistory.com%2Fimage%2F24253D3C52177993100B09' alt=''><p>안녕하세요 여러분! 지난 강좌에서 만들었던 <code class='inline-code'>MyString</code> 을 손 좀 봐주었나요? 아마도 <code class='inline-code'>MyString</code> 을 이용하여 여러가지 작업을 하면서 다음과 같은 생각을 하셨을 수도 있었을 것입니다.</p><ul><li><p> <code class='inline-code'>if(str1.compare(str2) == 0)</code> 하지 말고 <code class='inline-code'>if(str1 == str2)</code> 하면 어떨까?</p></li><li><p> <code class='inline-code'>str1.insert(str1.length(), str2)</code> 하지 말고 <code class='inline-code'>str1 = str1 +</code> str2; 하면 어떨까?</p></li><li><p> <code class='inline-code'>str1[10] =</code> 'c'; 와 같은 것도 할 수 있을까?</p></li></ul><p>물론 C 언어에서는 이러한 것을 상상조차 할 수 없었습니다. <code class='inline-code'>+, -, ==, []</code> 와 같은 기본 연산자들은 모두 C 언어에 기본적으로 정의되어 있는 데이터 타입(int, <code class='inline-code'>float</code> 등)에만 사용 가능한 것들 이였기 때문이죠. 이들을 구조체 변수에 사용한다는 것은 불가능하였습니다.</p><p>하지만 놀랍게도 C++ 에서는 사용자 정의 연산자를 사용할 수 있습니다. 어떠한 연산자들이 가능하나면, :: (범위 지정), . (멤버 지정), <code class='inline-code'>.*</code> (멤버 포인터로 멤버 지정) 을 제외한 여러분이 상상하는 모든 연산자를 사용할 수 있다는 것입니다. <code class='inline-code'>+, -, *</code> 는 물론이고, <code class='inline-code'>+=, -=</code> 와 같은 축약형들이나 >=, <code class='inline-code'>==,</code> 와 같은 비교 연산자, <code class='inline-code'>&&</code> 와 같은 논리 연산자, <code class='inline-code'>-&gt;</code> 와 같은 멤버 선택 연산자, <code class='inline-code'>++, --</code> 증감 연산자, <code class='inline-code'>[]</code> 와 심지어 () 까지 (함수 호출 연산자) 도 모두 여러분이 직접 만들 수 있습니다.</p><p>이 때 이러한 기본 연산자들을 직접 사용자가 정의하는 것을 연산자를 오버로딩(overloading) 한다고 부릅니다. 이전에 같은 이름의 함수를 인자만 다르게 사용하는 것을 '함수를 오버로딩 했다' 라고 불렀던 것 처럼, 기본 연산자를 여러분이 설계한 클래스에 맞게 직접 사용하는 것을 '연산자를 오버로딩 했다' 라고 부릅니다.</p><h3><p>  MyString 의 <code class='inline-code'>==</code> 연산자 오버로딩</p></h3><p>일단 연산자 오버로딩을 사용하기 위해서는, 다음과 같이 오버로딩을 원하는 연산자 함수를 제작하면 됩니다.</p><pre class='info'>
(리턴 타입) operator(연산자)(연산자가받는 인자)
</pre><p>(※ 참고적으로 위 방법 외에는 함수 이름으로 연산자를 절대 넣을 수 없습니다) 예를 들어서 우리가 <code class='inline-code'>==</code> 를 오버로딩 하고 싶다면, <code class='inline-code'>==</code> 연산자는 그 결과값이 언제나 <code class='inline-code'>bool</code> 이고, 인자로는 <code class='inline-code'>==</code> 로 비교하는 것 하나만 받게 됩니다. 따라서 다음과 같이 함수를 정의하면 됩니다.</p><pre class='info'>
bool operator==(MyString& str);
</pre><p>이제, 우리가 <code class='inline-code'>str1 == str2</code> 라는 명령을 한다면 이는 <code class='inline-code'>str1.operator==(str2)</code> 로 내부적으로 변환되서 처리됩니다. 그리고 그 결과값을 리턴하게 되겠지요. 사실 <code class='inline-code'>operator==</code> 를 만드는 것 자체는 별로 어려운 일은 아닙니다. 왜냐하면 이미 <code class='inline-code'>MyString</code> 에서 <code class='inline-code'>compare</code> 라는 좋은 함수를 제공하고 있기 때문이지요. 간단하게 만들어 보면 다음과 같습니다.</p><pre class="chroma">
<span class="kt">bool</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">=</span><span class="o">=</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span>

<span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="n">compare</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>  <span class="c1">// str 과 같으면 compare 에서 0 을 리턴한다.
</span><span class="c1"></span><span class="p">}</span>
</pre><p>여기서 <code class='inline-code'>!compare(str)</code> 을 리턴하는 이유는 <code class='inline-code'>compare</code> 함수에서 <code class='inline-code'>str</code> 과 <code class='inline-code'>*this</code> 가 같으면 0 을 리턴하도록 하였는데, <code class='inline-code'>operator==</code> 은 둘이 같으면 <code class='inline-code'>true</code> 를 리턴해야 되기 때문입니다. 따라서 <code class='inline-code'>NOT</code> 연산자인 <code class='inline-code'>!</code> 를 앞에 붙여서 리턴하면 올바르게 작동할 수 있습니다. 그럼, 실제로 우리의 새롭게 오버로딩한 <code class='inline-code'>==</code> 연산자가 잘 작동하는지 살펴봅시다.</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span><span class="err"> </span><span class="nc">MyString</span> <span class="p">{</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">string_content</span><span class="p">;</span>  <span class="c1">// 문자열 데이터를 가리키는 포인터
</span><span class="c1"></span>  <span class="kt">int</span> <span class="n">string_length</span><span class="p">;</span>     <span class="c1">// 문자열 길이
</span><span class="c1"></span>
  <span class="kt">int</span> <span class="n">memory_capacity</span><span class="p">;</span>  <span class="c1">// 현재 할당된 용량
</span><span class="c1"></span>
 <span class="k">public</span><span class="o">:</span>
  <span class="c1">// 문자 하나로 생성
</span><span class="c1"></span>  <span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="c1">// 문자열로 부터 생성
</span><span class="c1"></span>  <span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="c1">// 복사 생성자
</span><span class="c1"></span>  <span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">int</span> <span class="nf">capacity</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">void</span> <span class="nf">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

  <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">char</span> <span class="nf">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span><span class="p">;</span>

  <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">erase</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">int</span> <span class="nf">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">find_from</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">int</span> <span class="nf">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">find_from</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">int</span> <span class="nf">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">find_from</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">int</span> <span class="nf">compare</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">bool</span> <span class="k">operator</span><span class="o">=</span><span class="o">=</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>

<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">;</span>
  <span class="n">string_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
  <span class="n">memory_capacity</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">string_length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">string_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">string_length</span><span class="p">;</span>
  <span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">MyString</span><span class="p">(</span><span class="k">const</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
  <span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span>
    <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="o">~</span><span class="n">MyString</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="k">delete</span><span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">length</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">string_length</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">print</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>

  <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span>    <span class="k">delete</span><span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>

    <span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span><span class="p">;</span>
    <span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 그리고 굳이 str.string_length + 1 ~ string_length 부분은 초기화
</span><span class="c1"></span>  <span class="c1">// 시킬 필요는 없다. 왜냐하면 거기 까지는 읽어들이지 않기 때문이다.
</span><span class="c1"></span>
  <span class="n">string_length</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>

  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">str_length</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 그러면 다시 할당을 해줘야만 한다.
</span><span class="c1"></span>    <span class="k">delete</span><span class="p">[</span><span class="p">]</span> <span class="n">string_content</span><span class="p">;</span>

    <span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">str_length</span><span class="p">]</span><span class="p">;</span>
    <span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">str_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">string_length</span> <span class="o">=</span> <span class="n">str_length</span><span class="p">;</span>

  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">capacity</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">memory_capacity</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">void</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">reserve</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span><span class="o">*</span> <span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>

    <span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">size</span><span class="p">]</span><span class="p">;</span>
    <span class="n">memory_capacity</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span>
      <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>

    <span class="k">delete</span><span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 만일 예약하려는 size 가 현재 capacity 보다 작다면
</span><span class="c1"></span>  <span class="c1">// 아무것도 안해도 된다.
</span><span class="c1"></span><span class="p">}</span>
<span class="kt">char</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">string_length</span> <span class="o">|</span><span class="o">|</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 이는 i 의 위치 바로 앞에 문자를 삽입하게 된다. 예를 들어서
</span><span class="c1"></span>  <span class="c1">// abc 라는 문자열에 insert(1, &#34;d&#34;) 를 하게 된다면 adbc 가 된다.
</span><span class="c1"></span>
  <span class="c1">// 범위를 벗어나는 입력에 대해서는 삽입을 수행하지 않는다.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">loc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">|</span><span class="o">|</span> <span class="n">loc</span> <span class="o">&gt;</span> <span class="n">string_length</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">memory_capacity</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 이제 새롭게 동적으로 할당을 해야 한다.
</span><span class="c1"></span>
    <span class="k">if</span> <span class="p">(</span><span class="n">memory_capacity</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">)</span>
      <span class="n">memory_capacity</span> <span class="o">*</span><span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">elsememory_capacity</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>

    <span class="kt">char</span><span class="o">*</span> <span class="n">prev_string_content</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">;</span>
    <span class="n">string_content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">memory_capacity</span><span class="p">]</span><span class="p">;</span>

    <span class="c1">// 일단 insert 되는 부분 직전까지의 내용을 복사한다.
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 그리고 새롭에 insert 되는 문자열을 넣는다.
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">j</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 이제 다시 원 문자열의 나머지 뒷부분을 복사한다.
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">string_content</span><span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">delete</span><span class="p">[</span><span class="p">]</span> <span class="n">prev_string_content</span><span class="p">;</span>

    <span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 만일 초과하지 않는 경우 굳이 동적할당을 할 필요가 없게 된다.
</span><span class="c1"></span>  <span class="c1">// 효율적으로 insert 하기 위해, 밀리는 부분을 먼저 뒤로 밀어버린다.
</span><span class="c1"></span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">loc</span><span class="p">;</span> <span class="n">i</span><span class="o">-</span><span class="o">-</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 뒤로 밀기. 이 때 원래의 문자열 데이터가 사라지지 않게 함
</span><span class="c1"></span>    <span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// 그리고 insert 되는 문자 다시 집어넣기
</span><span class="c1"></span>  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span>
    <span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">loc</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>

  <span class="n">string_length</span> <span class="o">=</span> <span class="n">string_length</span> <span class="o">+</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="nf">insert</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">MyString</span><span class="o">&amp;</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">erase</span><span class="p">(</span><span class="kt">int</span> <span class="n">loc</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// loc 의 앞 부터 시작해서 num 문자를 지운다.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">|</span><span class="o">|</span> <span class="n">loc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">|</span><span class="o">|</span> <span class="n">loc</span> <span class="o">&gt;</span> <span class="n">string_length</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>

  <span class="c1">// 지운다는 것은 단순히 뒤의 문자들을 앞으로 끌고 온다고
</span><span class="c1"></span>  <span class="c1">// 생각하면 됩니다.
</span><span class="c1"></span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">loc</span> <span class="o">+</span> <span class="n">num</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">string_length</span> <span class="o">-</span><span class="o">=</span> <span class="n">num</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">find_from</span><span class="p">,</span> <span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">string_length</span> <span class="o">=</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="n">find_from</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">string_length</span> <span class="o">-</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">;</span> <span class="n">j</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="o">!</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">)</span> <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>  <span class="c1">// 찾지 못했음
</span><span class="c1"></span><span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">find_from</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="nf">find</span><span class="p">(</span><span class="n">find_from</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">find_from</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">MyString</span> <span class="n">temp</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="nf">find</span><span class="p">(</span><span class="n">find_from</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="n">compare</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// (*this) - (str) 을 수행해서 그 1, 0, -1 로 그 결과를 리턴한다
</span><span class="c1"></span>  <span class="c1">// 1 은 (*this) 가 사전식으로 더 뒤에 온다는 의미. 0 은 두 문자열
</span><span class="c1"></span>  <span class="c1">// 이 같다는 의미, -1 은 (*this) 사 사전식으러 더 앞에 온다는 의미이다.
</span><span class="c1"></span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">min</span><span class="p">(</span><span class="n">string_length</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">)</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span>
      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 여기 까지 했는데 끝나지 않았다면 앞 부분 까지 모두 똑같은 것이 된다.
</span><span class="c1"></span>  <span class="c1">// 만일 문자열 길이가 같다면 두 문자열은 아예 같은 문자열이 된다.
</span><span class="c1"></span>
  <span class="k">if</span> <span class="p">(</span><span class="n">string_length</span> <span class="o">=</span><span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

  <span class="c1">// 참고로 abc 와 abcd 의 크기 비교는 abcd 가 더 뒤에 오게 된다.
</span><span class="c1"></span>  <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">string_length</span> <span class="o">&gt;</span> <span class="n">str</span><span class="p">.</span><span class="n">string_length</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

  <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="n">MyString</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">=</span><span class="o">=</span><span class="p">(</span><span class="n">MyString</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="n">compare</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>  <span class="c1">// str 과 같으면 compare 에서 0 을 리턴한다.
</span><span class="c1"></span><span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">MyString</span> <span class="n">str1</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">a word</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
  <span class="n">MyString</span> <span class="nf">str2</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">sentence</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
  <span class="n">MyString</span> <span class="nf">str3</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">sentence</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">str1</span> <span class="o">=</span><span class="o">=</span> <span class="n">str2</span><span class="p">)</span>
    <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">str1 and str2 are same</span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">st1 and str2 are different</span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">str2</span> <span class="o">=</span><span class="o">=</span> <span class="n">str3</span><span class="p">)</span>
    <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">str2 and str3 are same</span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">st2 and str3 are different</span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile9.uf.tistory.com%2Fimage%2F245A6D4B520CF2291D03B6' alt=''><p>와 같이 잘 나옵니다. 위 코드에서도 쉽게 알 수 있지만 <code class='inline-code'>str1</code> 과 <code class='inline-code'>str2</code> 은 다르고, <code class='inline-code'>str2</code> 와 <code class='inline-code'>str3</code> 는 같기 때문에 위와 같이 제대로 처리되고 있음을 알 수 있습니다.</p><h3><p>  복소수 (Complex number) 클래스 만들기</p></h3><p><code class='inline-code'>MyString</code> 클래스를 이용해서 설명을 계속 하려고 했지만, <code class='inline-code'>MyString</code> 자체가 너무 비대한 바람에 좀더 간결하게 설명을 하기 위해 새로운 클래스를 만들어보도록 할 것입니다. 바로 복소수(Complex <code class='inline-code'>Number)</code> 클래스 인데요, 아마 이 강좌를 보시는 분들 중에서는 복소수가 정확히 무엇인지 모르시는 분들 도 있을 것입니다. 그 분들을 위해서 간략하게 먼저 설명을 하고 가겠습니다.!</p><img src='http://' alt=''><p>일단 실수의 제곱근에 대해서는 무엇인지 다들 아실 것이라 생각합니다. 그런데 실수의 제곱은 언제나 양수이기 때문에 위와 같이 음수의 제곱근은 실수로 표현할 수 없게 됩니다. 따라서, 음수의 제곱근을 나타내기 위해서 특별한 수를 정의하였는데 이를 허수(imaginary <code class='inline-code'>number)</code> 이라 부르며, 실제로 존재하지 않는 수학적으로만 존재하는 수라고 볼 수 있습니다. 그리고 특히 -1 의 제곱근을 위의 수식 처럼 <code class='inline-code'>i</code> 로 표기합니다.따라서, 이 때문에 예를 들어서 -4 의 제곱근은!</p><img src='http://' alt=''><p>와 같이 생각할 수 있겠지요. 그리고 복소수는, 이 허수와 실수를 모두 포함하는 수 체계로, 허수와 실수의 합으로 표현할 수 있습니다. 다시 말해서, 임의의 복소수 <code class='inline-code'>z</code> 는 다음과 같은 꼴입니다.!</p><img src='http://' alt=''><p>물론 여기서 <code class='inline-code'>a,b</code> 는 모두 실수 입니다.</p><p>우리가 만들고자 하는 것은 이 복소수를 나타내는 클래스를 구성하겠다는 이야기 입니다. 임의의 복소수 하나를 표현하기 위해서 두 개의 값(실수부, 허수부)이 필요하기 때문에 반드시 클래스로 구현을 해야 하겠죠. 따라서, 기본적으로 복소수 클래스 <code class='inline-code'>Complex</code> 는 다음과 같이 간단하게 만들 수 있습니다.</p><pre class="chroma">
<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>
<span class="p">}</span><span class="p">;</span>
</pre><p>복소수는 언제나 실수부와 허수부로 나뉘어지므로, <code class='inline-code'>Complex</code> 클래스 역시 실수부의 값과 허수부의 값을 나타내는 <code class='inline-code'>real</code> 과 <code class='inline-code'>img</code> 변수가 있습니다. 여기서 문제는 이전에 만들었던 <code class='inline-code'>MyString</code> 과는 다르게, 사칙 연산이 엄청나게 자주 쓰인다는 것입니다. 당연하게도 문자열의 덧셈 (+ 연산) 까지는 생각할 수 있었다 해도, 곱셈이나 나눗셈 연산 자체는 고려할 필요가 없는데, 복소수의 경우 당연히 클래스 인터페이스 차원에서 곱셈과 나눗셈을 지원해주어야만 합니다.</p><p>참고로, 복소수의 사칙 연산은 실수부와 허수부 따로 생각하여 진행됩니다. 간단히 말하면!</p><img src='http://' alt=''><p>와 같은 관계가 성립한다는 이야기 이죠. 곱셈의 경우는 좀더 복잡한데, 사실 분배법칙과 허수 둘을 곱하면 다시 -1 이 된다는 점만 생각하면 아래의 관계식도 어렵지 않게 생각할 수 있습니다.!</p><img src='http://' alt=''><p>나눗셈의 경우, 이전에 무리수의 유리화를 하셨던 것을 생각하면 간단합니다.!</p><img src='http://' alt=''><p>즉 분모를 실수화 할 수 있도록 분모의 켤레를 분자와 분모에 곱함으로써 실수로 나누는 것으로 쉽게 바꿀 수 있습니다. (실수로 나누는 것은 실수부, 허수부의 실수값을 그냥 실수로 나누면 됩니다)</p><p>그래서 만일 다음과 같이 연산자의 오버로딩을 모른다고 가정하고 <code class='inline-code'>Complex</code> 클래스를 구성하여 봅시다.</p><pre class="chroma">
<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>

  <span class="n">Complex</span> <span class="n">plus</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="nf">minus</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="nf">times</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="nf">divide</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>
</pre><p>이렇게 된다면 만일 <code class='inline-code'>int</code> 형 변수였다면</p><pre class="chroma">
<span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">/</span> <span class="n">c</span> <span class="o">+</span> <span class="n">d</span><span class="p">;</span>
</pre><p>로 간단하게 쓸 수 있었던 명령을</p><pre class="chroma">
<span class="n">a</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">divide</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="p">;</span>
</pre><p>와 같이 복잡한 함수식을 이용해서 표현해야만 합니다. 이는, 가독성이 떨어질 뿐더러 위 식을 딱 보고 도대체 무슨 작업을 하려고 하는지도 쉽게 알 수 없습니다. 하지만 연산자 오버로딩을 이용해서 <code class='inline-code'>plus</code> 를 <code class='inline-code'>operator+</code> 로, <code class='inline-code'>divide</code> 를 <code class='inline-code'>operator/</code> 로, 등등 바꿔준다면 단순히 프로그래머가<code class='inline-code'>a + b/c +</code> d; 게 쓴다고 해도, 컴파일러가a.operator+(b.operator/(c)).operator+(d); 로 알아서 변환시켜서 처리하기 때문에 속도나 다른 면의 어떠한 차이 없이 뛰어난 가독성과 편리함을 얻을 수 있게 됩니다.</p><p>이를 바탕으로 간단히 <code class='inline-code'>Complex</code> 클래스를 만들어본다면</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span> <span class="p">}</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">( </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">real</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> , </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">img</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> ) </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span><span class="p">;</span>

<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span>
      <span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">,</span>
      <span class="p">(</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">a</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="nf">b</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span>

  <span class="n">c</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile5.uf.tistory.com%2Fimage%2F2160643D520CFD6F1D18E1' alt=''><p>와 같이 잘 나옴을 알 수 있습니다. 여기서 가장 중요하게 봐야 할 부분은 바로, 사칙연산 연산자 함수들의 리턴 타입 입니다.</p><pre class="chroma">
<span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
</pre><p>위 4 개의 연산자 함수 모두 <code class='inline-code'>Complex&</code> 가 아닌 <code class='inline-code'>Complex</code> 를 리턴하고 있습니다. 간혹가다,</p><pre class="chroma">
<span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">real</span> <span class="o">+</span><span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">+</span><span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>로 잘못 생각하는 경우도 있습니다. 물론 이렇게 설계하였을 경우, <code class='inline-code'>Complex</code> 를 리턴하는 연산자 함수는 값의 복사가 일어나기 때문에 속도  저하가 발생하지만 위 처럼 레퍼런스를 리턴하게 되면 값의 복사 대신 레퍼런스만 복사하는 것이므로 큰 속도의 저하는 나타나지 않습니다. 하지만, 위와 같이 <code class='inline-code'>operator+</code> 를 정의할 경우 다음과 같은 문장이 어떻게 처리되는지 생각해봅시다.</p><pre class="chroma">
<span class="n">Complex</span> <span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</pre><p>아마도 위 문장을 쓴 사람 입장에서는 결과적으로 <code class='inline-code'>a = 2 * b +</code> c; 를 의도하였을 것입니다. 하지만, 실제로 처리되는 것을 보자면, (b.plus(c)).plus(b) 가 되는데, <code class='inline-code'>b.plus(c)</code> 를 하면서 <code class='inline-code'>b</code> 에는 (b + c) 가 들어가고, 거기에 다시 <code class='inline-code'>plus(b)</code> 를 하게 된다면 값 자체만 보자면 (b + c) <code class='inline-code'>+ (b + c)</code> 가 되서 (왜냐하면 현재 <code class='inline-code'>b</code> 에는 <code class='inline-code'>b + c</code> 가 들어가 있으니까) <code class='inline-code'>a = 2 * b + 2 * c</code> 가 되기 때문입니다. 이러한 문제를 막기 위해서는 반드시 사칙 연산의 경우 반드시 값을 리턴해야 만 합니다.</p><p>또한 함수 내부에서 '읽기' 만 수행되고 값이 바뀌지 않는 인자들에 대해서는 <code class='inline-code'>const</code> 키워드를 붙여주는 것이 바람직합니다. <code class='inline-code'>operator+</code> 의 경우, <code class='inline-code'>c</code> 의 값을 읽기만 하지 <code class='inline-code'>c</code> 의 값에 어떠한 변화도 주지 않으므로 <code class='inline-code'>const Complex&</code> 타입으로 인자를 받았습니다.</p><pre class='warning'>
인자의 값이 함수 내부에서 바뀌지 않는 다고 확신할 때에는 반드시 const 키워드를
    붙여주시기 바랍니다.
</pre><h3><p>  대입 연산자 함수</p></h3><p>아마 <code class='inline-code'>Complex</code> 클래스를 구현하면서 한 가지 빠뜨렸다고 생각하고 있는 것이 있을 것입니다. 바로, 대입 연산자  (=) 이지요. 아마도, 대입 연산자야 말로 가장 먼저 구현했어야 할 연산자 함수가 아니였을까 합니다.</p><pre class="chroma">
<span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
</pre><p>기본적으로 대입 연산자 함수는, 기존의 사칙연산 연산자 함수와는 다르게, <code class='inline-code'>Complex&</code> 타입을 리턴합니다. 사실 대입 연산자 자체의 의미를 생각해 볼 때 리턴값을 <code class='inline-code'>void</code> 로 해도 무방하지만, 프로그래머들은 종종 <code class='inline-code'>if((i = x) &lt; y)</code> 와 같은 문장을 사용하기 때문에 리턴값을 주는 것이 인터페이스 차원에서 더 낫다고 생각합니다.</p><p>이 때 <code class='inline-code'>Complex</code> 타입을 리턴하지 않고 굳이 <code class='inline-code'>Complex&</code> 타입을 리턴하냐면, 대입 연산 이후에 이 값을 가지고 다른 연산을 수행하지는 않기 때문입니다. 예를 들어서 (i = 3) <code class='inline-code'>+ 4</code> 와 같은 명령을 내리지는 않기 때문이지요. 그렇기에 값에 의한 복사가 발생하는 것 보다는 레퍼런스를 리턴하는 것이 더 올바른 판단이라고 봅니다.</p><p>이와 같은 사실을 바탕으로 <code class='inline-code'>operator=</code> 함수를 완성시켜 보면 아래와 같습니다.</p><pre class="chroma">
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span>

<span class="p">{</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>그럼 제대로 작동하는지 확인해보면</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span> <span class="p">}</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">( </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">real</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> , </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">img</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> ) </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span><span class="p">;</span>

<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span>
      <span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">,</span>
      <span class="p">(</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">a</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="nf">b</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="nf">c</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
  <span class="n">c</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile3.uf.tistory.com%2Fimage%2F2648ED34520D12320A734A' alt=''><p>와 같이 잘 작동함을 알 수 있습니다.</p><p>한 가지 재미있는 사실은 굳이 <code class='inline-code'>operator=</code> 를 만들지 않더라도, 위 소스를 컴파일 하면 잘 작동한다는 점입니다. 이는 컴파일러 차원에서 디폴트 대입 연산자(default <code class='inline-code'>assignment</code> operator)를 지원하고 있기 때문인데, 이전에 <a href='http://itguru.tistory.com/188'>복사 생성자를 다룰 때 디폴트 복사 생성자</a>가 있었던 것과 일맥상통합니다.</p><p>디폴트 복사 생성자와 마찬가지로 디폴트 대입 연산자 역시 얕은 복사를 수행합니다. 따라서, 깊은 복사가 필요한 클래스의 경우 (예를 들어, 클래스 내부적으로 동적으로 할당되는 메모리를 관리하는 포인터가 있다던지) 대입 연산자 함수를 꼭 만들어주어야 할 필요가 있습니다.</p><p>여담이지만, 이제 여러분은 다음 두 문장의 차이를 완벽히 이해 하실 수 있을 것이라 믿습니다.</p><pre class="chroma">
<span class="n">Some_Class</span> <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>  <span class="c1">// ①
</span><span class="c1"></span></pre><p>와</p><pre class="chroma">
<span class="n">Some_Class</span> <span class="n">a</span><span class="p">;</span>  <span class="c1">// ②
</span><span class="c1"></span><span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
</pre><p>말이지요. 이전에 이에 대해서 이야기 하였을 때 연산자 오버로딩을 배우지 못하였기 때문에 대충 두루뭉실하게 넘어갔지만 이제는 제대로 이해할 수 있습니다.① 의 경우, 아예 <code class='inline-code'>a</code> 의 '복사 생성자' 가 호출되는 것이고,② 의 경우 <code class='inline-code'>a</code> 의 그냥 기본 생성자가 호출 된 다음, 다음 문장에서 대입 연산자 함수가 실행되는 것입니다. 위 두 문장은 비록 비슷해 보이기는 해도 아예 다른 것이지요.</p><p>마찬가지 이유로 대입 사칙연산 함수들인, <code class='inline-code'>+=, -=</code> 등을 구현할 수 있습니다. 일단 <code class='inline-code'>=</code> 와 마찬가지로 아래와 같이 <code class='inline-code'>Complex&</code> 를 리턴하고</p><pre class="chroma">
<span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

<span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
</pre><p>그 내부 구현은 간단히 미리 만들어 놓은 <code class='inline-code'>operator+, operator-</code> 등을 이용해서 처리하면 됩니다.</p><pre class="chroma">
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>와 같이 말이지요. 전체 소스를 살펴보자면;</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span> <span class="p">}</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">( </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">real</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> , </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">img</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> ) </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span><span class="p">;</span>

<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span>
      <span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">,</span>
      <span class="p">(</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">a</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="nf">b</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">+</span><span class="o">=</span> <span class="n">b</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="n">b</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile28.uf.tistory.com%2Fimage%2F26065741520D14F3047A36' alt=''><p>와 같이 잘 출력됨을 알 수 있습니다. <code class='inline-code'>a</code> 의 값만 바뀐 채 <code class='inline-code'>b</code> 에는 아무런 영향이 없지요.</p><p>참고로, 연산자 오버로딩을 사용하게 된다면 <code class='inline-code'>a+= b</code> 와 <code class='inline-code'>a = a +</code> b; 가같다고 보장되지 않는다는 점을 명심해야 합니다. 컴파일러는 <code class='inline-code'>operator+</code> 와 <code class='inline-code'>operator=</code> 를 정의해놓았다고 해서 <code class='inline-code'>a+=b</code> 를 자동으로 <code class='inline-code'>a = a +</code> b; 로 바꾸어 주지 않습니다. 반드시 <code class='inline-code'>operator+=</code> 를 따로 만들어야지 <code class='inline-code'>+=</code> 를 사용할 수 있게 됩니다. 이와 같은 사실은 <code class='inline-code'>++</code> 을 <code class='inline-code'>+= 1</code> 로 바꾸어 주지 않는다던지, <code class='inline-code'>--</code> 를 <code class='inline-code'>-= 1</code> 로 바꾸어 주지 않는 다는 사실과 일맥상통합니다. 즉, 연산자 오버로딩을 하게 된다면 여러분이 생각하는 모든 연산자들에 대해 개별적인 정의가 필요합니다.</p><h3><p>  문자열로 <code class='inline-code'>Complex</code> 수와 덧셈하기</p></h3><p>이번에는 <code class='inline-code'>operator+</code> 를 개량해서, 꼭 <code class='inline-code'>Complex</code> 수를 더하는 것이 아니라, 문자열로도 덧셈을 할 수 있도록 <code class='inline-code'>operator+</code> 함수를 만드려 보려고 합니다. 다시 말해서,</p><pre class="chroma">
<span class="n">y</span> <span class="o">=</span> <span class="n">z</span> <span class="o">+</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">3+i2</span><span class="s">&#34;</span><span class="p">;</span>
</pre><p>이런 문장을 사용하였을 경우 성공적으로 처리할 수 있게 된다는 의미이지요. 참고로, 문자열로 복소수를 어떻게 표현해야 할 지에 대해서는 모종의 약속이 필요한데, 우리 <code class='inline-code'>Complex</code> 클래스의 경우 다음과 같은 꼴로 표현하도록 정합시다.</p><pre class='info'>
(부호)(실수부)(부호)i(허수부)
</pre><p>예를 들어서 "2+i3" 은 <code class='inline-code'>Complex</code> 수 (2 , 3) 을 나타낸 것이라 생각합니다. 또한, "2-i3" 은 (2, -3 ) 을 나타낸 것이 되겠지요. 만일 실수부나 허수부의 값이 0 이라면 굳이 안써주어도 되는데, 예를 들어서 그냥 "3" 은 (3 , 0) 을 나타내며, "-5i" 는 (0, -5) 를 나타내게 됩니다. 참고로 우리의 실수부와 허수부는 <code class='inline-code'>double</code> 변수 이기 때문에 문자열로 입력 받을 때 단순히 정수 부분만 받는 것이 아니라 소수점 아래 부분도 처리해 주어야만 할 것입니다. 이를 바탕으로 <code class='inline-code'>operator+</code> 함수를 만들어 보도록 합시다.</p><pre class="chroma">
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 입력 받은 문자열을 분석하여 real 부분과 img 부분을 찾아야 한다.
</span><span class="c1"></span>  <span class="c1">// 문자열의 꼴은 다음과 같습니다 &#34;[부호](실수부)(부호)i(허수부)&#34;
</span><span class="c1"></span>  <span class="c1">// 이 때 맨 앞의 부호는 생략 가능합니다. (생략시 + 라 가정)
</span><span class="c1"></span>
  <span class="kt">int</span> <span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">str_img</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">str_real</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>

  <span class="c1">// 먼저 가장 기준이 되는 &#39;i&#39; 의 위치를 찾는다.
</span><span class="c1"></span>  <span class="kt">int</span> <span class="n">pos_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">i</span><span class="sc">&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">pos_i</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 없다면 이 수는 실수 뿐이다.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">=</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">str_real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

    <span class="n">Complex</span> <span class="nf">temp</span><span class="p">(</span><span class="n">str_real</span><span class="p">,</span> <span class="n">str_img</span><span class="p">)</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 있다면, 실수부와 허수부를 나누어서 처리하면 된다.
</span><span class="c1"></span>  <span class="n">str_real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
  <span class="n">str_img</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">str_img</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="nf">temp</span><span class="p">(</span><span class="n">str_real</span><span class="p">,</span> <span class="n">str_img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>일단 문자열을 덧셈의 피연산자로 사용하게 되므로, <code class='inline-code'>operator+</code> 의 인자는 <code class='inline-code'>Complex &</code> 가 아니라 <code class='inline-code'>const char *</code> 가 됩니다. 저의 경우, 이제 입력 받은 '문자열 복소수' 를 분석하기 위해서 가장 중요한 'i' 의 위치를 먼저 찾도록 하였습니다. 왜냐하면 이 'i' 를 기준으로 복소수의 실수부와 허수부가 나뉘어지기 때문이지요.</p><pre class="chroma">
<span class="c1">// 먼저 가장 기준이 되는 &#39;i&#39; 의 위치를 찾는다.
</span><span class="c1"></span><span class="kt">int</span> <span class="n">pos_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">i</span><span class="sc">&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">pos_i</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre><p>따라서 위와 같이 <code class='inline-code'>pos_i</code> 에 <code class='inline-code'>str</code> 의 'i' 의 위치를 찾도록 하였습니다. 물론, 입력 받은 문자열에 반드시 'i' 가 있어야만 하는 것은 아닙니다. 왜냐하면 이전에도 말했듯이 복소수가 그냥 실수 라면 굳이 허수 부분을 표현하지 않을 수 있기 때문입니다. 따라서, 아래와 같이 <code class='inline-code'>i</code> 가 없을 경우 간단히 따로 처리할 수 있습니다.</p><pre class="chroma">
<span class="c1">// 만일 &#39;i&#39; 가 없다면 이 수는 실수 뿐이다.
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">=</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">str_real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="nf">temp</span><span class="p">(</span><span class="n">str_real</span><span class="p">,</span> <span class="n">str_img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>참고로 우리가 사용하는 <code class='inline-code'>get_number</code> 함수는 특정 문자열에서 수 부분을 <code class='inline-code'>double</code> 값으로 반환하는 함수 입니다. 사실 C 언어 표준 라이브러리인 <code class='inline-code'>stdlib.h</code> 에서 <code class='inline-code'>atof</code> 라는 함수를 제공해서 우리의 <code class='inline-code'>get_number</code> 함수와 정확히 똑같은 작업을 하는 함수를 사용할 수 있지만, 한 번 이 함수를 직접 만들어보는 것도 나쁘지 않을 것이라 생각해서 <code class='inline-code'>Complex</code> 클래스 내의 멤버 함수로 포함시켰습니다. 다만, 이 <code class='inline-code'>get_number</code> 의 경우 <code class='inline-code'>operator+</code> 함수의 내부적으로 사용되는 함수이지, 굳이 인터페이스로 제공할 필요는 없기 때문에 <code class='inline-code'>private</code> 으로 설정하였습니다.</p><pre class="chroma">
<span class="c1">// 만일 &#39;i&#39; 가 있다면, 실수부와 허수부를 나누어서 처리하면 된다.
</span><span class="c1"></span><span class="n">str_real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
<span class="n">str_img</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
</pre><p>자 이제, 다시 <code class='inline-code'>operator+</code> 함수를 돌아와서 살펴보자면 만일 <code class='inline-code'>i</code> 가 포함되어 있다면 <code class='inline-code'>i</code> 를 기준으로 왼쪽의 실수부와 오른쪽의 허수부로 나뉘게 됩니다. 이 때 <code class='inline-code'>str_real</code> 은 <code class='inline-code'>get_number</code> 함수를 이용해서 정확히 실수 값을 얻을 수 있습니다. (왜냐하면 맨 뒤에 숫자 뒤에 딸려오는 문자들은 <code class='inline-code'>get_number</code> 에서 알아서 무시된다) 하지만 <code class='inline-code'>str_img</code> 의 경우 <code class='inline-code'>i</code> 앞의 부호 부분이 잘리기 때문에 정확한 실수 값을 얻을 수 없기 때문에 따로</p><pre class="chroma">
<span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">str_img</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
</pre><p>로 해서 <code class='inline-code'>str_img</code> 의 정확한 부호를 처리하도록 하였습니다.</p><pre class="chroma">
<span class="kt">double</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="n">get_number</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">from</span> <span class="o">&gt;</span> <span class="n">to</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span> <span class="o">|</span><span class="o">|</span> <span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">+</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">from</span><span class="o">+</span><span class="o">+</span><span class="p">;</span>

  <span class="kt">double</span> <span class="n">num</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">decimal</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

  <span class="kt">bool</span> <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">from</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="o">=</span> <span class="n">to</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">.</span><span class="sc">&#39;</span><span class="p">)</span>
      <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="o">!</span><span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">decimal</span> <span class="o">/</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span>
      <span class="k">break</span><span class="p">;</span>  <span class="c1">// 그 이외의 이상한 문자들이 올 경우
</span><span class="c1"></span>  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">minus</span><span class="p">)</span> <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">num</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>저의 경우 <code class='inline-code'>get_number</code> 함수를 위와 같이 구현하였습니다. 만일 <code class='inline-code'>from</code> 이 <code class='inline-code'>to</code> 보다 크다면 당연히, 올바르지 않는 입력으로 0 을 반환하도록 하였습니다. (사실 이렇게 모든 예외적인 경우를 세세하게 처리하는 일도 매우 중요합니다) 그리고, 특별히 부호를 처리하기 위해서 <code class='inline-code'>minus</code> 라는 <code class='inline-code'>bool</code> 변수를 도입해서 마지막에 <code class='inline-code'>minus</code> 가 <code class='inline-code'>true</code> 일 경우에 부호를 음수로 바꾸도록 하였습니다.</p><pre class="chroma">
<span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span> <span class="o">|</span><span class="o">|</span> <span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">+</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">from</span><span class="o">+</span><span class="o">+</span><span class="p">;</span>
</pre><p>일단 부호 부분은 위와 같이 처리해서 부호 부분 바로 다음 부터 처리하도록 합니다.</p><pre class="chroma">
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">from</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="o">=</span> <span class="n">to</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
    <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">.</span><span class="sc">&#39;</span><span class="p">)</span>
    <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="o">!</span><span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">decimal</span> <span class="o">/</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
    <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="p">)</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span>
    <span class="k">break</span><span class="p">;</span>  <span class="c1">// 그 이외의 이상한 문자들이 올 경우
</span><span class="c1"></span><span class="p">}</span>
</pre><p><code class='inline-code'>double</code> 형 변수로 입력받은 문자열을 처리할 때 유의할 점은, <code class='inline-code'>for</code> 문에서 맨 앞자리 수 부터 읽는 다는 점입니다. 예를 들어서 <code class='inline-code'>123.456</code> 이라면 <code class='inline-code'>1,2,3...</code> 순으로 값을 입력 받게 되는데 이 때문에 소수점 앞 부분과 뒷 부분의 처리를 다르게 해야만 합니다. 소수점 앞 부분을 입력받을 때 (즉, <code class='inline-code'>integer_part</code> 변수가 <code class='inline-code'>true</code> 일 때) 에는 간단히</p><pre class="chroma">
<span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
<span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span><span class="p">;</span>
</pre><p>를 해서 문자열 부분의 값을 읽어들일 수 있습니다. 즉 <code class='inline-code'>1 -&gt; 12 -&gt; 123</code> 이 되겠지요. 참고로 <code class='inline-code'>str[i] -</code> '0' 을 하는 기법은 상당히 자주 쓰이는데, <code class='inline-code'>ASCII</code> 테이블 상에서 0 부터 9 까지 숫자들이 크기 순으로 연속적으로 배열되어 있기 때문에 단순히 '0' 을 빼버리면 그 숫자에 해당하는 실제 정수 값을 구할 수 있게 됩니다.</p><pre class="chroma">
<span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="o">!</span><span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">decimal</span> <span class="o">/</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
  <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>그리고 이번에는 소수점 뒷 부분을 읽어들일 차례 입니다. 소수점 뒷 부분의 경우 <code class='inline-code'>decimal</code> 이란 새로운 변수를 도입하여서, 현재 읽어들이는 위치에 해당하는 값을 구할 수 있게 되는데요, 예를 들어 <code class='inline-code'>123.456</code> 에서 4 의 경우 <code class='inline-code'>decimal</code> 은 <code class='inline-code'>0.1, 5</code> 는 <code class='inline-code'>0.01</code> 등이 되겠지요. 이와 같은 방식으로 해서 우리는 원래의 문자열을 <code class='inline-code'>double</code> 값으로 바꿀 수 있게 됩니다.</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

  <span class="kt">double</span> <span class="nf">get_number</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span> <span class="p">}</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">( </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">real</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> , </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">img</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> ) </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span><span class="p">;</span>

<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="n">get_number</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">from</span> <span class="o">&gt;</span> <span class="n">to</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span> <span class="o">|</span><span class="o">|</span> <span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">+</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">from</span><span class="o">+</span><span class="o">+</span><span class="p">;</span>

  <span class="kt">double</span> <span class="n">num</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">decimal</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

  <span class="kt">bool</span> <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">from</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="o">=</span> <span class="n">to</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">.</span><span class="sc">&#39;</span><span class="p">)</span>
      <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="o">!</span><span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">decimal</span> <span class="o">/</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span>
      <span class="k">break</span><span class="p">;</span>  <span class="c1">// 그 이외의 이상한 문자들이 올 경우
</span><span class="c1"></span>  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">minus</span><span class="p">)</span> <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">num</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 입력 받은 문자열을 분석하여 real 부분과 img 부분을 찾아야 한다.
</span><span class="c1"></span>  <span class="c1">// 문자열의 꼴은 다음과 같습니다 &#34;[부호](실수부)(부호)i(허수부)&#34;
</span><span class="c1"></span>  <span class="c1">// 이 때 맨 앞의 부호는 생략 가능합니다. (생략시 + 라 가정)
</span><span class="c1"></span>
  <span class="kt">int</span> <span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">str_img</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">str_real</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>

  <span class="c1">// 먼저 가장 기준이 되는 &#39;i&#39; 의 위치를 찾는다.
</span><span class="c1"></span>  <span class="kt">int</span> <span class="n">pos_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">i</span><span class="sc">&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">pos_i</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 없다면 이 수는 실수 뿐이다.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">=</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">str_real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

    <span class="n">Complex</span> <span class="nf">temp</span><span class="p">(</span><span class="n">str_real</span><span class="p">,</span> <span class="n">str_img</span><span class="p">)</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 있다면, 실수부와 허수부를 나누어서 처리하면 된다.
</span><span class="c1"></span>  <span class="n">str_real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
  <span class="n">str_img</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">str_img</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="nf">temp</span><span class="p">(</span><span class="n">str_real</span><span class="p">,</span> <span class="n">str_img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span>
      <span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">,</span>
      <span class="p">(</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">a</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile28.uf.tistory.com%2Fimage%2F2579DD3B521706FF295ABE' alt=''><p>와 같이 잘 실행되는 것을 알 수 있습니다.</p><p>그런데, <code class='inline-code'>+</code> 뿐만이 아니라, <code class='inline-code'>-, *</code> 등의 모든 연산자들에 대해 이 기능을 지원하기 위해서 각각의 코드를 반복적으로 쓰는 것은 매우 귀찮은 일이 아닐 수 없습니다. 이와 같은 완전 불편한 작업을 막기 위해 아예 <code class='inline-code'>const char *</code> 로 오버로딩되는 <code class='inline-code'>Complex</code> 생성자를 추가하는 것도 나쁘지 않다고 생각 됩니다.</p><p>그렇게 된다면 길고 복잡했었던 <code class='inline-code'>operator+ (const char * str)</code> 부분을 다음과 같이 간단하게 줄일 수 있기 때문이지요.</p><pre class="chroma">
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>그렇다면, 간단히 <code class='inline-code'>Complex(const char* str)</code> 을 만들어본다면 아래와 같습니다.</p><pre class="chroma">
<span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 입력 받은 문자열을 분석하여 real 부분과 img 부분을 찾아야 한다.
</span><span class="c1"></span>  <span class="c1">// 문자열의 꼴은 다음과 같습니다 &#34;[부호](실수부)(부호)i(허수부)&#34;
</span><span class="c1"></span>  <span class="c1">// 이 때 맨 앞의 부호는 생략 가능합니다. (생략시 + 라 가정)
</span><span class="c1"></span>
  <span class="kt">int</span> <span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="n">real</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>

  <span class="c1">// 먼저 가장 기준이 되는 &#39;i&#39; 의 위치를 찾는다.
</span><span class="c1"></span>  <span class="kt">int</span> <span class="n">pos_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">i</span><span class="sc">&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">pos_i</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 없다면 이 수는 실수 뿐이다.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">=</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 있다면, 실수부와 허수부를 나누어서 처리하면 된다.
</span><span class="c1"></span>  <span class="n">real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">img</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>그렇게 된다면, 나머지 함수들도,</p><pre class="chroma">
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">-</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">*</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">/</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>로 간단하게 구현할 수 있게 됩니다.</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

  <span class="kt">double</span> <span class="nf">get_number</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span> <span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">( </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">real</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> , </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">img</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> ) </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span><span class="p">;</span>
<span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 입력 받은 문자열을 분석하여 real 부분과 img 부분을 찾아야 한다.
</span><span class="c1"></span>  <span class="c1">// 문자열의 꼴은 다음과 같습니다 &#34;[부호](실수부)(부호)i(허수부)&#34;
</span><span class="c1"></span>  <span class="c1">// 이 때 맨 앞의 부호는 생략 가능합니다. (생략시 + 라 가정)
</span><span class="c1"></span>
  <span class="kt">int</span> <span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="n">real</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>

  <span class="c1">// 먼저 가장 기준이 되는 &#39;i&#39; 의 위치를 찾는다.
</span><span class="c1"></span>  <span class="kt">int</span> <span class="n">pos_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">i</span><span class="sc">&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">pos_i</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 없다면 이 수는 실수 뿐이다.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">=</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 있다면, 실수부와 허수부를 나누어서 처리하면 된다.
</span><span class="c1"></span>  <span class="n">real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">img</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="n">get_number</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">from</span> <span class="o">&gt;</span> <span class="n">to</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span> <span class="o">|</span><span class="o">|</span> <span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">+</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">from</span><span class="o">+</span><span class="o">+</span><span class="p">;</span>

  <span class="kt">double</span> <span class="n">num</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">decimal</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

  <span class="kt">bool</span> <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">from</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="o">=</span> <span class="n">to</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">.</span><span class="sc">&#39;</span><span class="p">)</span>
      <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="o">!</span><span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">decimal</span> <span class="o">/</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span>
      <span class="k">break</span><span class="p">;</span>  <span class="c1">// 그 이외의 이상한 문자들이 올 경우
</span><span class="c1"></span>  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">minus</span><span class="p">)</span> <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">num</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span>
      <span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">,</span>
      <span class="p">(</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">-</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">*</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">/</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">constComplex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">a</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">1.2 -i1.823</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">2.3+i22</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-12+i55</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile21.uf.tistory.com%2Fimage%2F2746124A5217107A221C06' alt=''><p>와 같이 제대로 계산됨을 알 수 있습니다.</p><p>한 가지 재미 있는 점은, <code class='inline-code'>Complex(const char *str)</code> 생성자만 남겨놓고, <code class='inline-code'>operator+(const char *str)</code> 계열들을 모두 지워보시고 컴파일 해보세요. 다시 말해서;</p><pre class="chroma">
<span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span><span class="err"> </span><span class="nc">Complex</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
  <span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">img</span><span class="p">;</span>

  <span class="kt">double</span> <span class="nf">get_number</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span><span class="p">;</span>

 <span class="k">public</span><span class="o">:</span>
  <span class="n">Complex</span><span class="p">(</span><span class="kt">double</span> <span class="n">real</span><span class="p">,</span> <span class="kt">double</span> <span class="n">img</span><span class="p">)</span> <span class="o">:</span> <span class="n">real</span><span class="p">(</span><span class="n">real</span><span class="p">)</span><span class="p">,</span> <span class="n">img</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span> <span class="p">}</span>
  <span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>
  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="n">Complex</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">( </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">real</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> , </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">img</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="sa"></span><span class="s">&#34;</span><span class="s"> ) </span><span class="s">&#34;</span> <span class="o">&lt;</span><span class="o">&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span><span class="p">;</span>
<span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 입력 받은 문자열을 분석하여 real 부분과 img 부분을 찾아야 한다.
</span><span class="c1"></span>  <span class="c1">// 문자열의 꼴은 다음과 같습니다 &#34;[부호](실수부)(부호)i(허수부)&#34;
</span><span class="c1"></span>  <span class="c1">// 이 때 맨 앞의 부호는 생략 가능합니다. (생략시 + 라 가정)
</span><span class="c1"></span>
  <span class="kt">int</span> <span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="n">real</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>

  <span class="c1">// 먼저 가장 기준이 되는 &#39;i&#39; 의 위치를 찾는다.
</span><span class="c1"></span>  <span class="kt">int</span> <span class="n">pos_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">!</span><span class="o">=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">i</span><span class="sc">&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">pos_i</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 없다면 이 수는 실수 뿐이다.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">=</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 만일 &#39;i&#39; 가 있다면, 실수부와 허수부를 나누어서 처리하면 된다.
</span><span class="c1"></span>  <span class="n">real</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">get_number</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pos_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">pos_i</span> <span class="o">&gt;</span><span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">img</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="n">get_number</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">from</span> <span class="o">&gt;</span> <span class="n">to</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">minus</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">-</span><span class="sc">&#39;</span> <span class="o">|</span><span class="o">|</span> <span class="n">str</span><span class="p">[</span><span class="n">from</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">+</span><span class="sc">&#39;</span><span class="p">)</span> <span class="n">from</span><span class="o">+</span><span class="o">+</span><span class="p">;</span>

  <span class="kt">double</span> <span class="n">num</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">decimal</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

  <span class="kt">bool</span> <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">from</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span><span class="o">=</span> <span class="n">to</span><span class="p">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="o">=</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">.</span><span class="sc">&#39;</span><span class="p">)</span>
      <span class="n">integer_part</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="o">!</span><span class="n">integer_part</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">decimal</span> <span class="o">/</span><span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="n">num</span> <span class="o">+</span><span class="o">=</span> <span class="p">(</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sa"></span><span class="sc">&#39;</span><span class="sc">0</span><span class="sc">&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span>
      <span class="k">break</span><span class="p">;</span>  <span class="c1">// 그 이외의 이상한 문자들이 올 경우
</span><span class="c1"></span>  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">minus</span><span class="p">)</span> <span class="n">num</span> <span class="o">*</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">num</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">,</span> <span class="n">img</span> <span class="o">-</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">temp</span><span class="p">(</span>
      <span class="p">(</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">,</span>
      <span class="p">(</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">+</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">-</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">*</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">/</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">:</span><span class="o">:</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">img</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Complex</span> <span class="n">a</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">1.2 -i1.823</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">2.3+i22</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-12+i55</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>성공적으로 컴파일 하였다면</p><img src='http://img1.daumcdn.net/thumb/R1920x0/?fname=http%3A%2F%2Fcfile21.uf.tistory.com%2Fimage%2F2746124A5217107A221C06' alt=''><p>놀랍게도 정확히 동일하게 나옵니다. 아니 이게 뭔가요. 고생 고생을 해서</p><pre class="chroma">
<span class="n">Complex</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
<span class="n">Complex</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span><span class="p">;</span>
</pre><p>들을 모두 만들어 주었더니, 결과적으로 생성자 하나만 만들면 충분하다는 것이였나요? 놀랍게도, 우리의 컴파일러는 매우 똑똑하기 때문에 이와 같은 일이 가능합니다. 우리가</p><pre class="chroma">
<span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span><span class="p">;</span>
</pre><p>와 같은 문장을 사용하였을 때, 앞에서 이야기 해왔듯이 컴파일러가 위 문장을</p><pre class="chroma">
<span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span><span class="p">)</span><span class="p">;</span>
</pre><p>로 바꿔줍니다. 하지만, 우리에게는 <code class='inline-code'>operator+(const char *str)</code> 이 없고, <code class='inline-code'>operator+(const Complex& c)</code> 밖에 없기 때문에 직접적으로 오버로딩 되지는 않습니다. 그렇지만, 컴파일러는 매우 똑똑하기 때문에 그 다음 순위로 오버로딩 될 수 있는 함수들이 있는지 없는 지 확인해봅니다. 그런데 놀랍게도, 우리에게는 <code class='inline-code'>const char *</code> 에서 <code class='inline-code'>Complex</code> 를 생성할 수 있는 생성자</p><pre class="chroma">
<span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">str</span><span class="p">)</span><span class="p">;</span>
</pre><p>가 있기 때문에 컴파일러는 문자열 리터럴로 부터 <code class='inline-code'>const Complex</code> 타입의 객체를 새롭게 생성할 수 있게 된다는 것입니다. 즉, 위 문장은 은 다음과 같이 변환됩니다.</p><pre class="chroma">
<span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">Complex</span><span class="p">(</span><span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
</pre><p>그럼 이제 <code class='inline-code'>const Complex</code> 에 인자로 전달할 수 있게 되어서 제대로 프로그램이 작동을 하게 되지요. 여기서 한 가지 짚고 넘어가야 할 점은, 만일 우리가 <code class='inline-code'>operator+</code> 함수의 인자가 <code class='inline-code'>const Complex& c</code> 가 아니라 그냥 <code class='inline-code'>Complex& c</code> 로 받도록 하였다면 위와 같은 변환은 이루어지지 않습니다. 왜냐하면"-1.1 <code class='inline-code'>+</code> i3.923" 자체가 문자열 리터럴 이므로, 이를 바탕으로 생성된 객체 역시 상수 여야 하기 때문입니다. 따라서여러 모로 함수 인자의 값을 변형하지 않는다고 확신이 들면 무조건 <code class='inline-code'>const</code> 인자로 받도록 하는 것이 좋습니다.</p><p>이러한 방식으로 여러분의 <code class='inline-code'>Complex</code> 클래스의 문자열을 이용해서 복소수 덧셈을 수행할 수 있는 훌륭한 기능을 추가하였습니다. 하지만 문제는 다음과 같은 문장은 실행이 될 까요?</p><pre class="chroma">
<span class="n">a</span> <span class="o">=</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span> <span class="o">+</span> <span class="n">a</span><span class="p">;</span>
</pre><p>사실 이 문장이나, 원래의</p><pre class="chroma">
<span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="sa"></span><span class="s">&#34;</span><span class="s">-1.1 + i3.923</span><span class="s">&#34;</span><span class="p">;</span>
</pre><p>문장이나 정확히 동일한 식입니다. 왜냐하면 <code class='inline-code'>+</code> 연산자는 교환 법칙이 성립해야만 하기 때문이죠. 하지만 여러분도 이미 짐작하셨겠지만 전자의 경우에는 성공적으로 컴파일 되지 않습니다. 왜냐하면 <code class='inline-code'>a +</code> "-1.1+i3.923" 의 경우 이 문장이 a.operator+("-1.1+i3.923") 으로 변환되어서 정확히 수행될 수 있지만"-1.1 <code class='inline-code'>+</code> i3.923" <code class='inline-code'>+ a</code> 의 경우에는 이 같은 변환이 불가능 하기 때문입니다.</p><p>그렇다면 이러한 문제를 어떻게 해결할 수 있을까요?</p><p>이에 대해서는 다음 시간에 다루어 보도록 하겠습니다.</p><h3><p>  생각해보기</p></h3><p><code class='inline-code'>1.</code> 그렇다면 <code class='inline-code'>Complex</code> 클래스의 연산자 오버로딩을 수행하면서 쌓은 지식을 바탕으로 <code class='inline-code'>MyString</code> 함수를 완전하게 만들어봅시다. 즉, 강좌 서두에서 지적한 사항들을 모두 구현하시면 됩니다. (난이도 : 下<code class='inline-code'>)</code></p><pre class='warning'>강좌를 보다가 조금이라도 궁금한 것이나 이상한 점이 있다면꼭 댓글을 남겨주시기 바랍니다. 그 외에도 강좌에 관련된 것이라면 어떠한 것도 질문해 주셔도 상관 없습니다. 생각해 볼 문제도 정 모르겠다면 댓글을 달아주세요.

현재 여러분이 보신 강좌는<<씹어먹는 C++ - <5 - 1. 내가 만든 연산자 - 연산자 오버로딩>>> 입니다. 이번 강좌의모든 예제들의 코드를 보지 않고 짤 수준까지 강좌를 읽어 보시기 전까지 다음 강좌로 넘어가지 말아주세요


[다음 강좌 보러가기](http://itguru.tistory.com/135)
</pre>